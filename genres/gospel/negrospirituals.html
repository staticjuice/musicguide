<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,900">
        <link rel="stylesheet" href="../../css/style.css">
        <title>Negro Spirituals</title>
    </head>

    <body class="genre" id="negrospirituals">
        <div class="box gospel">
            <h1>NEGRO SPIRITUALS</h1>

            <p>An interesting fact about Popular Music is that it emerged out of necessity rather than being a form of art or expression. The earliest genres can be traced back as early as the 19th century, at a time when slavery of African people was still omnipresent in the United States. When African slaves were brought to the United States and Christianized, they began to perceive biblical parallels to their own situation (and were sometimes even encouraged to do so by zealously Evangelical whites). Thus, many spirituals address themes of freedom, earthly suffering and hope for deliverance. They were sung both at worship services and in the fields, and were passed down orally from generation to generation. Given those origins, spirituals are usually performed very simply and written in repetitive, easily remembered structures (for example, many verses in spirituals include a one-line refrain that's sung by the entire group and repeated after each new line of the verse). In that sense, Negro Spirituals often bear a resemblance to secular pre-war Blues, a music stemming from a similarly rural lineage.</p>

            <div class="row icon-list">
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-gospel">1</div></div>
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-gospel">2</div></div>
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-gospel">3</div></div>
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-gospel">4</div></div>
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-gospel">5</div></div>
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-gospel">6</div></div>
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-gospel">7</div></div>
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-gospel">8</div></div>
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-gospel">9</div></div>
                <div class="d-block d-md-none col-md-1 col-xs-1"><div class="buttons buttons-gospel-stop">&#9724;</div></div>
            </div>

            <div class="example">
                <p class="artisttrack">Artist: <span id="artist"><span></p><br>
                <p class="artisttrack">Track: <span id="track"></span></p>
            </div>

            <div class="d-none d-md-block col-md-1 stop"><div class="buttons buttons-gospel-stop">&#9724;</div></div>
        </div>

        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

        <script>
            $(document).ready(function() {
                var tracks = [
                    {
                        artist: "Ed Young",
                        track: "Jim And John",
                        path: "../../samples/gospel/negrospirituals1.ogg"
                    },
                    {
                        artist: "Ervin Webb",
                        track: "I'm Going Home",
                        path: "../../samples/gospel/negrospirituals2.ogg"
                    },
                    {
                        artist: "Ed Lewis",
                        track: "Tom Devil",
                        path: "../../samples/gospel/negrospirituals3.ogg"
                    },
                    {
                        artist: "Lightning",
                        track: "Long John",
                        path: "../../samples/gospel/negrospirituals4.ogg"
                    },
                    {
                        artist: "Johnny Lee Moore",
                        track: "Eighteen Hammers",
                        path: "../../samples/gospel/negrospirituals5.ogg"
                    },
                    {
                        artist: "John Davis",
                        track: "Blow Gabriel",
                        path: "../../samples/gospel/negrospirituals6.ogg"
                    },
                    {
                        artist: "Jesse Lee Pratcher",
                        track: "Green Sally, Up",
                        path: "../../samples/gospel/negrospirituals7.ogg"
                    },
                    {
                        artist: "James Carter",
                        track: "Po' Lazarus",
                        path: "../../samples/gospel/negrospirituals8.ogg"
                    },
                    {
                        artist: "Dock Reed",
                        track: "Troubled Lord I'm Troubled",
                        path: "../../samples/gospel/negrospirituals9.ogg"
                    }
                ]

                tracks.forEach(track => {
                    const audio = new Audio()
                    audio.addEventListener('canplaythrough', null, false)
                    audio.src = track.path
                })

                var artistSpan = $(document).find('#artist')[0]

                var track = $(document).find('#track')[0]

                var audioInstanceArray = [];

                var buttons = [];

                var audioInstance;

                $(document).find('.buttons-gospel').each(function(index, button) {

                    buttons.push(button);

                    $(this).click(function() {

                        removeAllButtonBorders()

                        $(this).toggleClass('clicked');

                        stopAllMusic()

                        audioInstance = new Audio(tracks[index].path);
                        audioInstanceArray.push(audioInstance);
                        audioInstance.play();

                        artistSpan.innerHTML = tracks[index].artist
                        track.innerHTML = tracks[index].track

                    });
                });

                $('.buttons-gospel-stop').on('click', function() {

                    stopAllMusic()

                    artistSpan.innerHTML = ''
                    track.innerHTML = ''

                    removeAllButtonBorders()

                });

                var removeAllButtonBorders = () => {
                    buttons.forEach(
                        button => button.className = "buttons buttons-gospel"
                    )
                }

                var stopAllMusic = () => {
                    audioInstanceArray.forEach(function(audioInstance, index) {
                        audioInstance.pause();
                        audioInstance.currentTime = 0;
                        audioInstanceArray.pop();
                    });
                }

            });
        </script>
    </body>
</html>
