<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,900">
        <link rel="stylesheet" href="../../css/style.css">
        <title>Glitch</title>
    </head>

    <body class="genre" id="glitch">
        <div class="box downtempo">
            <h1>GLITCH</h1>

            <p>Glitch is another example of the fact that anything can be music and probably almost any genre already exists. Inspired by the cracking and skittering sound of broken compact discs ("CD-glitches"), some DJs and sound producers in Germany and the UK went ahead to compose entire songs of faults, as if the songs were broken. Alongside glitches, often used techniques involve addition of the well-known broken disc "clicking sound" and skipping part of the track (laser jumping), which is simply referred to as "cuts". Although CDs became less and less the staple of the music industry, the concept of a collage of unexpected error noises remained a strong influence on electronic music and could be seen as the third and arguably most real, most concrete wave of Musique Concrète. Glitch is more than just an out-of-the-box experiment &ndash; the genre symbolizes the art of failure, and raises philosophical questions about whether a song should be controlled and predetermined. The corresponding artwork is highly conceptual and almost an art exhibition on its own, further strengthening Glitch's metaphysical dimension.</p>

            <div class="row icon-list">
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-downtempo">1</div></div>
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-downtempo">2</div></div>
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-downtempo">3</div></div>
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-downtempo">4</div></div>
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-downtempo">5</div></div>
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-downtempo">6</div></div>
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-downtempo">7</div></div>
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-downtempo">8</div></div>
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-downtempo">9</div></div>
                <div class="d-block d-lg-none col-md-1 col-xs-1"><div class="buttons buttons-downtempo-stop">&FilledSmallSquare;</div></div>
            </div>

            <div class="example">
                <p class="artisttrack">Artist: <span id="artist"><span></p><br>
                <p class="artisttrack">Track: <span id="track"></span></p>
            </div>

            <div class="d-none d-lg-block col-md-1 stop"><div class="buttons buttons-downtempo-stop">&FilledSmallSquare;</div></div>
        </div>

        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

        <script>
            $(document).ready(function() {
                var tracks = [
                    {
                        artist: "Alva Noto",
                        track: "Uni Acronym",
                        path: "../../samples/downtempo/glitch1.ogg"
                    },
                    {
                        artist: "Kid606",
                        track: "Dodgy",
                        path: "../../samples/downtempo/glitch2.ogg"
                    },
                    {
                        artist: "Cex",
                        track: "At Least I Can Say I Tried",
                        path: "../../samples/downtempo/glitch3.ogg"
                    },
                    {
                        artist: "Electric Company",
                        track: "As Am I",
                        path: "../../samples/downtempo/glitch4.ogg"
                    },
                    {
                        artist: "Ben Frost",
                        track: "Híbakúsja",
                        path: "../../samples/downtempo/glitch5.ogg"
                    },
                    {
                        artist: "Ilpo Väisänen",
                        track: "Tukahduttaja",
                        path: "../../samples/downtempo/glitch6.ogg"
                    },
                    {
                        artist: "Porter Ricks",
                        track: "Harbour Chart",
                        path: "../../samples/downtempo/glitch7.ogg"
                    },
                    {
                        artist: "Pan Sonic",
                        track: "Virhe",
                        path: "../../samples/downtempo/glitch8.ogg"
                    },
                    {
                        artist: "Peter Rehberg",
                        track: "Boxes & Angels",
                        path: "../../samples/downtempo/glitch9.ogg"
                    }
                ]

                tracks.forEach(track => {
                    const audio = new Audio()
                    audio.addEventListener('canplaythrough', null, false)
                    audio.src = track.path
                })

                var artistSpan = $(document).find('#artist')[0]
                var track = $(document).find('#track')[0]
                var audioInstanceArray = [];
                var buttons = [];
                var audioInstance;

                $(document).find('.buttons-downtempo').each(function(index, button) {
                    buttons.push(button);
                    $(this).click(function() {
                        removeAllButtonBorders()
                        $(this).toggleClass('clicked');
                        stopAllMusic()
                        audioInstance = new Audio(tracks[index].path);
                        audioInstanceArray.push(audioInstance);
                        audioInstance.play();
                        artistSpan.innerHTML = tracks[index].artist
                        track.innerHTML = tracks[index].track
                    });
                });

                $('.buttons-downtempo-stop').on('click', function() {
                    stopAllMusic()
                    artistSpan.innerHTML = ''
                    track.innerHTML = ''
                    removeAllButtonBorders()
                });

                var removeAllButtonBorders = () => {
                    buttons.forEach(
                        button => button.className = "buttons buttons-downtempo"
                    )
                }

                var stopAllMusic = () => {
                    audioInstanceArray.forEach(function(audioInstance, index) {
                        audioInstance.pause();
                        audioInstance.currentTime = 0;
                        audioInstanceArray.pop();
                    });
                }
            });
        </script>
    </body>
</html>
