<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,900">
        <link rel="stylesheet" href="../../css/style.css">
        <title>New Age</title>
    </head>

    <body class="genre" id="newage">
        <div class="box downtempo">
            <h1>NEW AGE</h1>

            <p>Two evolutions in the 70s laid the foundations for New Age. On the one hand there was the introduction of nature sounds in Ambient music. Music did not need to repulse the environment but could actually be the voice of the environment &ndash; preferably a beautiful and escapist one. On the other hand there was the rise of unprecedented heavy, macho music such as Heavy Metal. Hereby, record stores saw a steady increase in demand in the opposite genre. With the spotlights on so much noise and teen-oriented music, many people craved music with a sense of calmness. New Age is often a careful balance of both acoustic and electronic instruments, which is quite unique among genres. Though a lot of New Age is instrumental, soothing voices are not uncommon. The overall tempo is very low (50-60 BPM) and transitions occur gradually and smoothly. New Age caresses the mind with trembling timbres and stimulates the body with an inner rhythm. But New Age is more than a music genre. The urge for nature-connected, tranquillizing music is intertwined with the birth of an affined spiritual subculture also known as New Age.</p>

            <div class="row icon-list">
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-downtempo">1</div></div>
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-downtempo">2</div></div>
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-downtempo">3</div></div>
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-downtempo">4</div></div>
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-downtempo">5</div></div>
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-downtempo">6</div></div>
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-downtempo">7</div></div>
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-downtempo">8</div></div>
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-downtempo">9</div></div>
                <div class="d-block d-md-none col-md-1 col-xs-1"><div class="buttons buttons-downtempo-stop">&#9724;</div></div>
            </div>

            <div class="example">
                <p class="artisttrack">Artist: <span id="artist"><span></p><br>
                <p class="artisttrack">Track: <span id="track"></span></p>
            </div>

            <div class="d-none d-md-block col-md-1 stop"><div class="buttons buttons-downtempo-stop">&#9724;</div></div>
        </div>

        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

        <script>
            $(document).ready(function() {
                var tracks = [
                    {
                        artist: "Enya",
                        track: "Orinoco Flow",
                        path: "../../samples/downtempo/newage1.ogg"
                    },
                    {
                        artist: "Boko Suzuki",
                        track: "Spirit, Breath And Movement",
                        path: "../../samples/downtempo/newage2.ogg"
                    },
                    {
                        artist: "Ray Lynch",
                        track: "The Oh Of Pleasure",
                        path: "../../samples/downtempo/newage3.ogg"
                    },
                    {
                        artist: "Nicholas Gunn",
                        track: "Entering Twin Falls",
                        path: "../../samples/downtempo/newage4.ogg"
                    },
                    {
                        artist: "Karl Jenkins",
                        track: "Adiemus",
                        path: "../../samples/downtempo/newage5.ogg"
                    },
                    {
                        artist: "Enigma",
                        track: "Gravity Of Love",
                        path: "../../samples/downtempo/newage6.ogg"
                    },
                    {
                        artist: "Secret Garden",
                        track: "Sleepsong",
                        path: "../../samples/downtempo/newage7.ogg"
                    },
                    {
                        artist: "Loreena McKennitt",
                        track: "Snow",
                        path: "../../samples/downtempo/newage8.ogg"
                    },
                    {
                        artist: "Enigma",
                        track: "The Child In Us",
                        path: "../../samples/downtempo/newage9.ogg"
                    }
                ]

                tracks.forEach(track => {
                    const audio = new Audio()
                    audio.addEventListener('canplaythrough', null, false)
                    audio.src = track.path
                })

                var artistSpan = $(document).find('#artist')[0]
                var track = $(document).find('#track')[0]
                var audioInstanceArray = [];
                var buttons = [];
                var audioInstance;

                $(document).find('.buttons-downtempo').each(function(index, button) {
                    buttons.push(button);
                    $(this).click(function() {
                        removeAllButtonBorders()
                        $(this).toggleClass('clicked');
                        stopAllMusic()
                        audioInstance = new Audio(tracks[index].path);
                        audioInstanceArray.push(audioInstance);
                        audioInstance.play();
                        artistSpan.innerHTML = tracks[index].artist
                        track.innerHTML = tracks[index].track
                    });
                });

                $('.buttons-downtempo-stop').on('click', function() {
                    stopAllMusic()
                    artistSpan.innerHTML = ''
                    track.innerHTML = ''
                    removeAllButtonBorders()
                });

                var removeAllButtonBorders = () => {
                    buttons.forEach(
                        button => button.className = "buttons buttons-downtempo"
                    )
                }

                var stopAllMusic = () => {
                    audioInstanceArray.forEach(function(audioInstance, index) {
                        audioInstance.pause();
                        audioInstance.currentTime = 0;
                        audioInstanceArray.pop();
                    });
                }
            });
        </script>
    </body>
</html>
