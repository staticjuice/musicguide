<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
        <link rel="stylesheet" href="../../css/style.css">
        <title>Funk</title>
    </head>

    <body id="funk">
        <div class="box rhythmandblues">
            <h1>FUNK</h1><div class="year year-rhythmandblues">1965</div>

            <p>Soul was very popular and melodic, but it wasn't really daring or danceable. After a while, artists started looking at Rock and Jazz for new elements. They preferred the psychedelic, rebellious nature of Psychedelic Rock alongside the deep, dynamic part of Soul Jazz as flavours of choice for the revolutionary fusion that was Funk. James Brown spearheaded the evolution from Soul to what became known as Funk Soul and eventually Funk. Funk places strong emphasis on the first beat of each bar while the rest of the rhythm constantly changes, like an early form of Breakbeat. This is known as "The Rhythm of the One" (the one beat, instead of four or two). All instruments work together to enhance this feeling. Percussion becomes accentuated by short, monotone riffs, slapping bass, brass instruments, and accents on synth/piano to create what is known as "the groove" &ndash; the pulsing force behind each Funk song. Yet Funk does not try to blend all instruments into a carefully assembled and produced whole (like Soul) but it maintains their individuality to create a more organic sound.</p>

            <div class="row">
                <div class="col-1"><div class="buttons buttons-rhythmandblues">1</div></div>
                <div class="col-1"><div class="buttons buttons-rhythmandblues">2</div></div>
                <div class="col-1"><div class="buttons buttons-rhythmandblues">3</div></div>
                <div class="col-1"><div class="buttons buttons-rhythmandblues">4</div></div>
                <div class="col-1"><div class="buttons buttons-rhythmandblues">5</div></div>
                <div class="col-1"><div class="buttons buttons-rhythmandblues">6</div></div>
                <div class="col-1"><div class="buttons buttons-rhythmandblues">7</div></div>
                <div class="col-1"><div class="buttons buttons-rhythmandblues">8</div></div>
                <div class="col-1"><div class="buttons buttons-rhythmandblues">9</div></div>
            </div>

            <p class="artisttrack">Artist: <span id="artist"><span></p><br>
            <p class="artisttrack">Track: <span id="track"></span></p>
            <div class="col-1 stop"><div class="buttons buttons-rhythmandblues-stop">&FilledSmallSquare;</div></div>
        </div>

        <script src="https://code.jquery.com/jquery-3.7.0.slim.min.js" integrity="sha256-tG5mcZUtJsZvyKAxYLVXrmjKBVLd6VpVccqz/r4ypFE=" crossorigin="anonymous"></script>

        <script>
            $(document).ready(function() {
                var tracks = [
                    {
                        artist: "James Brown",
                        track: "Papa's Got A Brand New Bag",
                        path: "../../samples/rhythmandblues/funk1.ogg"
                    },
                    {
                        artist: "Parliament",
                        track: "P-Funk (Wants To Get Funked Up)",
                        path: "../../samples/rhythmandblues/funk2.ogg"
                    },
                    {
                        artist: "Tower Of Power",
                        track: "What Is Hip?",
                        path: "../../samples/rhythmandblues/funk3.ogg"
                    },
                    {
                        artist: "Funkadelic",
                        track: "Standing On The Verge Of Getting It On",
                        path: "../../samples/rhythmandblues/funk4.ogg"
                    },
                    {
                        artist: "Bootsy Collins",
                        track: "Bootzilla",
                        path: "../../samples/rhythmandblues/funk5.ogg"
                    },
                    {
                        artist: "Sly & The Family Stone",
                        track: "Underdog",
                        path: "../../samples/rhythmandblues/funk6.ogg"
                    },
                    {
                        artist: "Average White Band",
                        track: "Pick Up The Pieces",
                        path: "../../samples/rhythmandblues/funk7.ogg"
                    },
                    {
                        artist: "Curtis Mayfield",
                        track: "Superfly",
                        path: "../../samples/rhythmandblues/funk8.ogg"
                    },
                    {
                        artist: "Maceo",
                        track: "Soul Power '74",
                        path: "../../samples/rhythmandblues/funk9.ogg"
                    }
                ]

                tracks.forEach(track => {
                    const audio = new Audio()
                    audio.addEventListener('canplaythrough', null, false)
                    audio.src = track.path
                })

                var artistSpan = $(document).find('#artist')[0]
                var track = $(document).find('#track')[0]
                var audioInstanceArray = [];
                var buttons = [];
                var audioInstance;

                $(document).find('.buttons-rhythmandblues').each(function(index, button) {
                    buttons.push(button);
                    $(this).click(function() {
                        removeAllButtonBorders()
                        $(this).toggleClass('clicked');
                        stopAllMusic()
                        audioInstance = new Audio(tracks[index].path);
                        audioInstanceArray.push(audioInstance);
                        audioInstance.play();
                        artistSpan.innerHTML = tracks[index].artist
                        track.innerHTML = tracks[index].track
                    });
                });

                $('.buttons-rhythmandblues-stop').on('click', function() {
                    stopAllMusic()
                    artistSpan.innerHTML = ''
                    track.innerHTML = ''
                    removeAllButtonBorders()
                });

                var removeAllButtonBorders = () => {
                    buttons.forEach(
                        button => button.className = "buttons buttons-rhythmandblues"
                    )
                }

                var stopAllMusic = () => {
                    audioInstanceArray.forEach(function(audioInstance, index) {
                        audioInstance.pause();
                        audioInstance.currentTime = 0;
                        audioInstanceArray.pop();
                    });
                }
            });
        </script>
    </body>
</html>
