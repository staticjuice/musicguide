<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,900">
        <link rel="stylesheet" href="../../css/style.css">
        <title>Reggae</title>
    </head>

    <body class="genre" id="reggae">
        <div class="box reggae">
            <h1>REGGAE</h1>

            <p>Soon a new, slower type of Rocksteady emerged, being the first type of Jamaican music to be called "Reggae". Embedded in the sunny, warm Caribbean climate of Jamaica and influenced by the abundant availability of marijuana, Reggae doesn't sound as much reactionary as it is. But to this very day it has never ceased to question authority. The bass guitar became Reggae's leading instrument, which dropped the first beat of a bar, creating the so called "one drop rhythm" which gives Reggae its characteristic offbeat sound. The rhythm staccato guitar moved to the background, but other Ska characteristics were still clearly audible. This early Reggae eventually got claimed as the subcultural music of the spiritual Rastafari movement. Rastafari is a special Jamaican faith dating back as early as the 30s, which deals about many issues that are also attributed to Reggae &ndash; religion, racism, ghetto-life, cannabis use, African roots and more. The term "Roots Reggae" is either reserved for Reggae strongly expressing Rastafari beliefs and issues, or to distinguish the genre from other Jamaican music.</p>

            <div class="row icon-list">
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-reggae">1</div></div>
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-reggae">2</div></div>
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-reggae">3</div></div>
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-reggae">4</div></div>
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-reggae">5</div></div>
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-reggae">6</div></div>
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-reggae">7</div></div>
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-reggae">8</div></div>
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-reggae">9</div></div>
                <div class="d-block d-lg-none col-lg-1 col-xs-1"><div class="buttons buttons-reggae-stop">&FilledSmallSquare;</div></div>
            </div>

            <div class="example">
                <p class="artisttrack">Artist: <span id="artist"><span></p><br>
                <p class="artisttrack">Track: <span id="track"></span></p>
            </div>

            <div class="d-none d-lg-block col-md-1 stop"><div class="buttons buttons-reggae-stop">&FilledSmallSquare;</div></div>
        </div>

        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

        <script>
            $(document).ready(function() {
                var tracks = [
                    {
                        artist: "Burning Spear",
                        track: "Marcus Garvey",
                        path: "../../samples/reggae/reggae1.ogg"
                    },
                    {
                        artist: "Peter Tosh",
                        track: "Legalize It",
                        path: "../../samples/reggae/reggae2.ogg"
                    },
                    {
                        artist: "Prince Far I",
                        track: "Heavy Manners",
                        path: "../../samples/reggae/reggae3.ogg"
                    },
                    {
                        artist: "Max Romeo & The Upsetters",
                        track: "Chase The Devil",
                        path: "../../samples/reggae/reggae4.ogg"
                    },
                    {
                        artist: "Sylford Walker",
                        track: "Burn Babylon",
                        path: "../../samples/reggae/reggae5.ogg"
                    },
                    {
                        artist: "Don Carlos",
                        track: "Fight The Revolution",
                        path: "../../samples/reggae/reggae6.ogg"
                    },
                    {
                        artist: "Israel Vibration",
                        track: "Natty Dread",
                        path: "../../samples/reggae/reggae7.ogg"
                    },
                    {
                        artist: "Culture",
                        track: "The International Herb",
                        path: "../../samples/reggae/reggae8.ogg"
                    },
                    {
                        artist: "Bob Marley And The Wailers",
                        track: "Jamming",
                        path: "../../samples/reggae/reggae9.ogg"
                    }
                ]

                tracks.forEach(track => {
                    const audio = new Audio()
                    audio.addEventListener('canplaythrough', null, false)
                    audio.src = track.path
                })

                var artistSpan = $(document).find('#artist')[0]
                var track = $(document).find('#track')[0]
                var audioInstanceArray = [];
                var buttons = [];
                var audioInstance;

                $(document).find('.buttons-reggae').each(function(index, button) {
                    buttons.push(button);
                    $(this).click(function() {
                        removeAllButtonBorders()
                        $(this).toggleClass('clicked');
                        stopAllMusic()
                        audioInstance = new Audio(tracks[index].path);
                        audioInstanceArray.push(audioInstance);
                        audioInstance.play();
                        artistSpan.innerHTML = tracks[index].artist
                        track.innerHTML = tracks[index].track
                    });
                });

                $('.buttons-reggae-stop').on('click', function() {
                    stopAllMusic()
                    artistSpan.innerHTML = ''
                    track.innerHTML = ''
                    removeAllButtonBorders()
                });

                var removeAllButtonBorders = () => {
                    buttons.forEach(
                        button => button.className = "buttons buttons-reggae"
                    )
                }

                var stopAllMusic = () => {
                    audioInstanceArray.forEach(function(audioInstance, index) {
                        audioInstance.pause();
                        audioInstance.currentTime = 0;
                        audioInstanceArray.pop();
                    });
                }
            });
        </script>
    </body>
</html>
