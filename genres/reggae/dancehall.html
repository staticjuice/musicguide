<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="../../css/bootstrap.css">
        <link rel="stylesheet" href="../../css/style.css">
        <title>Dancehall</title>
    </head>

    <body id="dancehall">
        <div class="box reggae"><div class="year year-reggae">1981</div>
            <h1>DANCEHALL</h1>

            <p>Excessive violence, gang wars and passive governance coerced many Jamaicans to flee into escapist party music, eventually creating the phenomenon known as Dancehall. Disco introduced the nightclub-party-culture around the world which eventually found its way to Jamaica. Jamaica too had its own dancing clubs and discotheques, but DJs here stayed true to the native music. They took the rhythm from old 60s Ska records, the bass and sound of Reggae and influences from Dance and Rock such as the addition of Rock drums. There was little left of the spirituality of Reggae though. This was in-your-face, secular and aggressive party music. Instead of drugs, God or politics, the lyrics dealt with so-called "slackness" &ndash; explicit sexual and vulgar content. Dancehall also brought back the concept of toasting, which Reggae had abandoned. These types of vocals are much more fitting to both the sound and content. A new type of fashion to go along with the party phenomenon of Dancehall makes this more than just a music genre &ndash; combined with Ragga it is a well-established subculture of debauchery and escapism.</p>

            <div class="row icon-list">
                <div class="col-1"><div class="buttons buttons-reggae">1</div></div>
                <div class="col-1"><div class="buttons buttons-reggae">2</div></div>
                <div class="col-1"><div class="buttons buttons-reggae">3</div></div>
                <div class="col-1"><div class="buttons buttons-reggae">4</div></div>
                <div class="col-1"><div class="buttons buttons-reggae">5</div></div>
                <div class="col-1"><div class="buttons buttons-reggae">6</div></div>
                <div class="col-1"><div class="buttons buttons-reggae">7</div></div>
                <div class="col-1"><div class="buttons buttons-reggae">8</div></div>
                <div class="col-1"><div class="buttons buttons-reggae">9</div></div>
            </div>

            <p class="artisttrack">Artist: <span id="artist"><span></p><br>
            <p class="artisttrack">Track: <span id="track"></span></p>
            <div class="col-1 stop"><div class="buttons buttons-reggae-stop">&FilledSmallSquare;</div></div>
        </div>

        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>

        <script>
            $(document).ready(function() {
                var tracks = [
                    {
                        artist: "Yellowman",
                        track: "Zungguzungguguzungguzeng",
                        path: "../../samples/reggae/dancehall1.ogg"
                    },
                    {
                        artist: "Sly & Robbie",
                        track: "Boops (Here To Go)",
                        path: "../../samples/reggae/dancehall2.ogg"
                    },
                    {
                        artist: "Eek-A-Mouse",
                        track: "Wa-Do-Dem",
                        path: "../../samples/reggae/dancehall3.ogg"
                    },
                    {
                        artist: "Tenor Saw",
                        track: "Ring The Alarm",
                        path: "../../samples/reggae/dancehall4.ogg"
                    },
                    {
                        artist: "Barrington Levy",
                        track: "Here I Come",
                        path: "../../samples/reggae/dancehall5.ogg"
                    },
                    {
                        artist: "Super Beagle",
                        track: "Dust A Sound Boy",
                        path: "../../samples/reggae/dancehall6.ogg"
                    },
                    {
                        artist: "General Echo",
                        track: "Bathroom Sex",
                        path: "../../samples/reggae/dancehall7.ogg"
                    },
                    {
                        artist: "Damian Marley",
                        track: "Welcome To Jamrock",
                        path: "../../samples/reggae/dancehall8.ogg"
                    },
                    {
                        artist: "Sister Nancy",
                        track: "Bam Bam",
                        path: "../../samples/reggae/dancehall9.ogg"
                    }
                ]

                tracks.forEach(track => {
                    const audio = new Audio()
                    audio.addEventListener('canplaythrough', null, false)
                    audio.src = track.path
                })

                var artistSpan = $(document).find('#artist')[0]
                var track = $(document).find('#track')[0]
                var audioInstanceArray = [];
                var buttons = [];
                var audioInstance;

                $(document).find('.buttons-reggae').each(function(index, button) {
                    buttons.push(button);
                    $(this).click(function() {
                        removeAllButtonBorders()
                        $(this).toggleClass('clicked');
                        stopAllMusic()
                        audioInstance = new Audio(tracks[index].path);
                        audioInstanceArray.push(audioInstance);
                        audioInstance.play();
                        artistSpan.innerHTML = tracks[index].artist
                        track.innerHTML = tracks[index].track
                    });
                });

                $('.buttons-reggae-stop').on('click', function() {
                    stopAllMusic()
                    artistSpan.innerHTML = ''
                    track.innerHTML = ''
                    removeAllButtonBorders()
                });

                var removeAllButtonBorders = () => {
                    buttons.forEach(
                        button => button.className = "buttons buttons-reggae"
                    )
                }

                var stopAllMusic = () => {
                    audioInstanceArray.forEach(function(audioInstance, index) {
                        audioInstance.pause();
                        audioInstance.currentTime = 0;
                        audioInstanceArray.pop();
                    });
                }
            });
        </script>
    </body>
</html>
