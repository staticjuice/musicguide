<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Dub</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../css/style.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,900" rel="stylesheet">
</head>
  
<body class="genre dub">
    <div id="box-reggae">
        <h1>DUB</h1><br>
            
        The early Reggae composers probably never thought that Dub was going to be such an important and influential genre. Dub started out as instrumental B-sides or copy records of Reggae or Rocksteady records. Hence the word “dub” was derived from the name of a copy record &ndash; a dubplate. The original music is completely stripped down of all instruments and then rebuilt in the same way but entirely electronically and much, much slower. Dub features lots of sound effects, especially reverb and incredibly heavy subsonic bass designed to be played on typical Jamaican sound systems. One of the main characteristics of Dub manipulation is delay, which is used on many different parts of the song and often in an extensive, panoramic manner. This gives Dub its typical “wah-wah” feeling where sounds seem to bounce back from the walls and never die. All these sound effects synergize well with cannabis, which strongly influenced Dub music. Because of its pioneering technology yet dreamy and surreal sound, Dub was an important inspiration for all kinds of music and remains a living stream in the contemporary world of popular music.<br><br>

        <div class="row icon-list">
            <div class="col-sm-1 col-xs-1">
                <div class="buttons-reggae">1</div>
            </div>

            <div class="col-sm-1 col-xs-1">
                <div class="buttons-reggae">2</div>
            </div>
                  
            <div class="col-sm-1 col-xs-1">
                <div class="buttons-reggae">3</div>
            </div>
                  
            <div class="col-sm-1 col-xs-1">
                <div class="buttons-reggae">4</div>
            </div>
                
            <div class="col-sm-1 col-xs-1">
                <div class="buttons-reggae">5</div>
            </div>

            <div class="col-sm-1 col-xs-1">
                <div class="buttons-reggae">6</div>
            </div>

            <div class="col-sm-1 col-xs-1">
                <div class="buttons-reggae">7</div>
            </div>

            <div class="col-sm-1 col-xs-1">
                <div class="buttons-reggae">8</div>
            </div>

            <div class="col-sm-1 col-xs-1">
                <div class="buttons-reggae">9</div>
            </div>

            <div class="visible-xs col-xs-1">
                <div class="buttons-reggae-stop">&#9724;</div>
            </div>
        </div>

        <div class="example"><br>
            <p class="artisttrack">Artist: <span id="artist"><span></p><br>
            <p class="artisttrack">Track: <span id="track"></span></p> 
        </div>

        <div class="hidden-xs col-sm-1 stop">
            <div class="buttons-reggae-stop">&#9724;</div>
        </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    
    <script>
        $(document).ready(function() {

            
            var tracks = [
                {
                    artist: "Joe Gibbs & The Professionals",
                    track: "Chapter Three",
                    path: "../../samples/reggae/dub1.ogg"
                },
                {
                    artist: "Prince Jammy",
                    track: "Conspiracy On Neptune",
                    path: "../../samples/reggae/dub2.ogg"
                },
                {
                    artist: "Augustus Pablo",
                    track: "555 Dub Street",
                    path: "../../samples/reggae/dub3.ogg"
                },
                {
                    artist: "Mad Professor",
                    track: "Jail House Dub",
                    path: "../../samples/reggae/dub4.ogg"
                },
                {
                    artist: 'Lee "Scratch" Perry',
                    track: "Jah",
                    path: "../../samples/reggae/dub5.ogg"
                },
                {
                    artist: "Jah Shaka",
                    track: "Rastafari Dub",
                    path: "../../samples/reggae/dub6.ogg"
                },
                {
                    artist: "Scientist",
                    track: "Drum Song Dub",
                    path: "../../samples/reggae/dub7.ogg"
                },
                {
                    artist: "King Tubby",
                    track: "Blood, Sweat And Danza Dub",
                    path: "../../samples/reggae/dub8.ogg"
                },
                {
                    artist: "Nightshade",
                    track: "Steppers",
                    path: "../../samples/reggae/dub9.ogg"
                }
            ]

            tracks.forEach(track => {
                const audio = new Audio()
                audio.addEventListener('canplaythrough', null, false)
                audio.src = track.path
            })

            var artistSpan = $(document).find('#artist')[0]

            var track = $(document).find('#track')[0]

            var audioInstanceArray = [];

            var buttons = [];

            var audioInstance;

            $(document).find('.buttons-reggae').each(function(index, button) {

                buttons.push(button);
                
                $(this).click(function() {

                    removeAllButtonBorders()

                    $(this).toggleClass('clicked');
                
                    stopAllMusic()

                    audioInstance = new Audio(tracks[index].path);
                    audioInstanceArray.push(audioInstance);
                    audioInstance.play();

                    artistSpan.innerHTML = tracks[index].artist
                    track.innerHTML = tracks[index].track

                });
            });

            $('.buttons-reggae-stop').on('click', function() {

                stopAllMusic()

                artistSpan.innerHTML = ''
                track.innerHTML = ''

                removeAllButtonBorders()

            });

            var removeAllButtonBorders = () => {
                buttons.forEach(
                    button => button.className = "buttons-reggae"
                )
            }

            var stopAllMusic = () => {
                 audioInstanceArray.forEach(function(audioInstance, index) {
                        audioInstance.pause();
                        audioInstance.currentTime = 0;
                        audioInstanceArray.pop();
                    });
            }

        });

    </script>

</body>
</html>