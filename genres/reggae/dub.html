<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="../../css/bootstrap.css">
        <link rel="stylesheet" href="../../css/style.css">
        <title>Dub</title>
    </head>

    <body id="dub">
        <div class="box reggae"><div class="year year-reggae">1972</div>
            <h1>DUB</h1>

            <p>The early Reggae composers probably never thought that Dub was going to be such an important and influential genre. Dub started as instrumental B-sides or copy records of Reggae or Rocksteady records. Hence the word "dub" was derived from the name of a copy record &ndash; a dubplate. The original music is completely stripped down of all instruments and then rebuilt in the same way but entirely electronically and much, much slower. Dub features lots of sound effects, especially reverb and incredibly heavy subsonic bass designed to be played on typical Jamaican sound systems. One of the main characteristics of Dub manipulation is delay, which is used in many different parts of the song and often in an extensive, panoramic manner. This gives Dub its typical "wah-wah" feeling where sounds seem to bounce back from the walls and never die. All these sound effects synergise well with cannabis, which strongly influenced Dub music. Because of its pioneering technology yet dreamy and surreal sound, Dub was an important inspiration for all kinds of music and remains a living stream in the contemporary world of popular music.</p>

            <div class="row icon-list">
                <div class="col-1"><div class="buttons buttons-reggae">1</div></div>
                <div class="col-1"><div class="buttons buttons-reggae">2</div></div>
                <div class="col-1"><div class="buttons buttons-reggae">3</div></div>
                <div class="col-1"><div class="buttons buttons-reggae">4</div></div>
                <div class="col-1"><div class="buttons buttons-reggae">5</div></div>
                <div class="col-1"><div class="buttons buttons-reggae">6</div></div>
                <div class="col-1"><div class="buttons buttons-reggae">7</div></div>
                <div class="col-1"><div class="buttons buttons-reggae">8</div></div>
                <div class="col-1"><div class="buttons buttons-reggae">9</div></div>
            </div>

            <p class="artisttrack">Artist: <span id="artist"><span></p><br>
            <p class="artisttrack">Track: <span id="track"></span></p>
            <div class="col-1 stop"><div class="buttons buttons-reggae-stop">&FilledSmallSquare;</div></div>
        </div>

        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>

        <script>
            $(document).ready(function() {
                var tracks = [
                    {
                        artist: "Joe Gibbs & The Professionals",
                        track: "Chapter Three",
                        path: "../../samples/reggae/dub1.ogg"
                    },
                    {
                        artist: "Prince Jammy",
                        track: "Conspiracy On Neptune",
                        path: "../../samples/reggae/dub2.ogg"
                    },
                    {
                        artist: "Augustus Pablo",
                        track: "555 Dub Street",
                        path: "../../samples/reggae/dub3.ogg"
                    },
                    {
                        artist: "Mad Professor",
                        track: "Jail House Dub",
                        path: "../../samples/reggae/dub4.ogg"
                    },
                    {
                        artist: 'Lee "Scratch" Perry',
                        track: "Jah",
                        path: "../../samples/reggae/dub5.ogg"
                    },
                    {
                        artist: "Jah Shaka",
                        track: "Rastafari Dub",
                        path: "../../samples/reggae/dub6.ogg"
                    },
                    {
                        artist: "Sly & The Revolutionaries",
                        track: "Cocaine",
                        path: "../../samples/reggae/dub7.ogg"
                    },
                    {
                        artist: "King Tubby",
                        track: "Blood, Sweat And Danza Dub",
                        path: "../../samples/reggae/dub8.ogg"
                    },
                    {
                        artist: "Nightshade",
                        track: "Steppers",
                        path: "../../samples/reggae/dub9.ogg"
                    }
                ]

                tracks.forEach(track => {
                    const audio = new Audio()
                    audio.addEventListener('canplaythrough', null, false)
                    audio.src = track.path
                })

                var artistSpan = $(document).find('#artist')[0]
                var track = $(document).find('#track')[0]
                var audioInstanceArray = [];
                var buttons = [];
                var audioInstance;

                $(document).find('.buttons-reggae').each(function(index, button) {
                    buttons.push(button);
                    $(this).click(function() {
                        removeAllButtonBorders()
                        $(this).toggleClass('clicked');
                        stopAllMusic()
                        audioInstance = new Audio(tracks[index].path);
                        audioInstanceArray.push(audioInstance);
                        audioInstance.play();
                        artistSpan.innerHTML = tracks[index].artist
                        track.innerHTML = tracks[index].track
                    });
                });

                $('.buttons-reggae-stop').on('click', function() {
                    stopAllMusic()
                    artistSpan.innerHTML = ''
                    track.innerHTML = ''
                    removeAllButtonBorders()
                });

                var removeAllButtonBorders = () => {
                    buttons.forEach(
                        button => button.className = "buttons buttons-reggae"
                    )
                }

                var stopAllMusic = () => {
                    audioInstanceArray.forEach(function(audioInstance, index) {
                        audioInstance.pause();
                        audioInstance.currentTime = 0;
                        audioInstanceArray.pop();
                    });
                }
            });
        </script>
    </body>
</html>
