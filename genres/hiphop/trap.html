<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="../../css/bootstrap.css">
        <link rel="stylesheet" href="../../css/style.css">
        <title>Trap</title>
    </head>

    <body id="trap">
        <div class="box hiphop">
            <h1>TRAP</h1><div class="year year-hiphop">2003</div>

            <p>Slowly a new style of Hip Hop music bubbled up in the shadows of the Southern US underground &ndash; Trap. This particular type of Hip Hop differs from other styles by adding lots of busy hat and snare fills and often being completely digitally made. Trap also drops the beat on an offbeat, giving a more dramatic, slow-motion build-and-drop feel. Pronounced snares, doubled crisp hi-hats, heavy TR-808 use and sometimes even brass instruments all add perfectly to Trap's aggressive, bleak lyrical content. It is no coincidence that the word "Trap" is Hip Hop slang for a drug trade location, adding a sense of paranoia to the music. After 2010, Ghettotech influences certain Trap producers and the subgenre Drill is born &ndash; even darker and grittier than Trap, but with less pronounced breaks and obsessed with drugs. After all, Trap's sound is heavily influenced by the habit of syrup sipping &ndash; a new type of drug behaviour where codeine or promethazine cough syrup is mixed with soda or liquor. Combined with the effects of marijuana, a slow-motion sound with strong hooks, unexpected interrupts and slurry, intoxicated lyrics is the outcome.</p>

            <div class="row">
                <div class="col-1"><div class="buttons buttons-hiphop">1</div></div>
                <div class="col-1"><div class="buttons buttons-hiphop">2</div></div>
                <div class="col-1"><div class="buttons buttons-hiphop">3</div></div>
                <div class="col-1"><div class="buttons buttons-hiphop">4</div></div>
                <div class="col-1"><div class="buttons buttons-hiphop">5</div></div>
                <div class="col-1"><div class="buttons buttons-hiphop">6</div></div>
                <div class="col-1"><div class="buttons buttons-hiphop">7</div></div>
                <div class="col-1"><div class="buttons buttons-hiphop">8</div></div>
                <div class="col-1"><div class="buttons buttons-hiphop">9</div></div>
            </div>

            <p class="artisttrack">Artist: <span id="artist"><span></p><br>
            <p class="artisttrack">Track: <span id="track"></span></p>
            <div class="col-1 stop"><div class="buttons buttons-hiphop-stop">&FilledSmallSquare;</div></div>
        </div>

        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>

        <script>
            $(document).ready(function() {
                var tracks = [
                    {
                        artist: "Kendrick Lamar",
                        track: "HUMBLE.",
                        path: "../../samples/hiphop/trap1.ogg"
                    },
                    {
                        artist: "Jeezy",
                        track: "Church In These Streets",
                        path: "../../samples/hiphop/trap2.ogg"
                    },
                    {
                        artist: "Lil Uzi Vert",
                        track: "Money Longer",
                        path: "../../samples/hiphop/trap3.ogg"
                    },
                    {
                        artist: "Childish Gambino",
                        track: "This Is America",
                        path: "../../samples/hiphop/trap4.ogg"
                    },
                    {
                        artist: "XXXTentacion",
                        track: "SAD!",
                        path: "../../samples/hiphop/trap5.ogg"
                    },
                    {
                        artist: "Desiigner",
                        track: "Panda",
                        path: "../../samples/hiphop/trap6.ogg"
                    },
                    {
                        artist: "Big Sean",
                        track: "Bounce Back",
                        path: "../../samples/hiphop/trap7.ogg"
                    },
                    {
                        artist: "Post Malone feat. Quavo",
                        track: "Congratulations",
                        path: "../../samples/hiphop/trap8.ogg"
                    },
                    {
                        artist: "$uicicideBoy$ feat. Pouya",
                        track: "South Side Suicide",
                        path: "../../samples/hiphop/trap9.ogg"
                    }
                ]

                tracks.forEach(track => {
                    const audio = new Audio()
                    audio.addEventListener('canplaythrough', null, false)
                    audio.src = track.path
                })

                var artistSpan = $(document).find('#artist')[0]
                var track = $(document).find('#track')[0]
                var audioInstanceArray = [];
                var buttons = [];
                var audioInstance;

                $(document).find('.buttons-hiphop').each(function(index, button) {
                    buttons.push(button);
                    $(this).click(function() {
                        removeAllButtonBorders()
                        $(this).toggleClass('clicked');
                        stopAllMusic()
                        audioInstance = new Audio(tracks[index].path);
                        audioInstanceArray.push(audioInstance);
                        audioInstance.play();
                        artistSpan.innerHTML = tracks[index].artist
                        track.innerHTML = tracks[index].track
                    });
                });

                $('.buttons-hiphop-stop').on('click', function() {
                    stopAllMusic()
                    artistSpan.innerHTML = ''
                    track.innerHTML = ''
                    removeAllButtonBorders()
                });

                var removeAllButtonBorders = () => {
                    buttons.forEach(
                        button => button.className = "buttons buttons-hiphop"
                    )
                }

                var stopAllMusic = () => {
                    audioInstanceArray.forEach(function(audioInstance, index) {
                        audioInstance.pause();
                        audioInstance.currentTime = 0;
                        audioInstanceArray.pop();
                    });
                }
            });
        </script>
    </body>
</html>
