<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="../../css/bootstrap.css">
        <link rel="stylesheet" href="../../css/style.css">
        <title>Modal Jazz</title>
    </head>

    <body id="modaljazz">
        <div class="box jazz">
            <h1>MODAL JAZZ</h1><div class="year year-jazz">1958</div>

            <p>Modal Jazz is not so much a style of Jazz as it is a structure. Before the advent of modal improvisations in the 50s, solo improvisations were based around the specific key of a piece &ndash; that is, its tonal centre, the starting point to which its melodies and chord progressions would return for a feeling of resolution or completeness. Modal improvisations, on the other hand, were based on modes or scales &ndash; but not just the typical major and minor scales familiar to nearly all musicians. The most commonly used modes did relate to major scales, though &ndash; each note in the scale was also the first note of a new mode, which would incorporate all of the notes in the original major scale, but sounded different because the new starting point rearranged the order of distances between notes. Thus, if a musician were improvising over a D chord for example, he could essentially choose any key centre whose corresponding scale included the note D (unless the composer dictated specific modes to be used in the solos). The new order of distances between notes could produce very different moods.</p>

            <div class="row">
                <div class="col-1"><div class="buttons buttons-jazz">1</div></div>
                <div class="col-1"><div class="buttons buttons-jazz">2</div></div>
                <div class="col-1"><div class="buttons buttons-jazz">3</div></div>
                <div class="col-1"><div class="buttons buttons-jazz">4</div></div>
                <div class="col-1"><div class="buttons buttons-jazz">5</div></div>
                <div class="col-1"><div class="buttons buttons-jazz">6</div></div>
                <div class="col-1"><div class="buttons buttons-jazz">7</div></div>
                <div class="col-1"><div class="buttons buttons-jazz">8</div></div>
                <div class="col-1"><div class="buttons buttons-jazz">9</div></div>
            </div>

            <p class="artisttrack">Artist: <span id="artist"><span></p><br>
            <p class="artisttrack">Track: <span id="track"></span></p>
            <div class="col-1 stop"><div class="buttons buttons-jazz-stop">&FilledSmallSquare;</div></div>
        </div>

        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>

        <script>
            $(document).ready(function() {
                var tracks = [
                    {
                        artist: "Miles Davis",
                        track: "So What",
                        path: "../../samples/jazz/modaljazz1.ogg"
                    },
                    {
                        artist: "Herbie Hancock",
                        track: "Dolphin Dance",
                        path: "../../samples/jazz/modaljazz2.ogg"
                    },
                    {
                        artist: "John Coltrane",
                        track: "Impressions",
                        path: "../../samples/jazz/modaljazz3.ogg"
                    },
                    {
                        artist: "Wayne Shorter",
                        track: "Speak No Evil",
                        path: "../../samples/jazz/modaljazz4.ogg"
                    },
                    {
                        artist: "Joe Henderson",
                        track: "Blue Bossa",
                        path: "../../samples/jazz/modaljazz5.ogg"
                    },
                    {
                        artist: "Woody Shaw",
                        track: "From Moment To Moment",
                        path: "../../samples/jazz/modaljazz6.ogg"
                    },
                    {
                        artist: "Freddie Hubbard",
                        track: "Red Clay",
                        path: "../../samples/jazz/modaljazz7.ogg"
                    },
                    {
                        artist: "McCoy Tyner",
                        track: "Passion Dance",
                        path: "../../samples/jazz/modaljazz8.ogg"
                    },
                    {
                        artist: "Bill Evans Trio",
                        track: "Beautiful Love",
                        path: "../../samples/jazz/modaljazz9.ogg"
                    }
                ]

                tracks.forEach(track => {
                    const audio = new Audio()
                    audio.addEventListener('canplaythrough', null, false)
                    audio.src = track.path
                })

                var artistSpan = $(document).find('#artist')[0]
                var track = $(document).find('#track')[0]
                var audioInstanceArray = [];
                var buttons = [];
                var audioInstance;

                $(document).find('.buttons-jazz').each(function(index, button) {
                    buttons.push(button);
                    $(this).click(function() {
                        removeAllButtonBorders()
                        $(this).toggleClass('clicked');
                        stopAllMusic()
                        audioInstance = new Audio(tracks[index].path);
                        audioInstanceArray.push(audioInstance);
                        audioInstance.play();
                        artistSpan.innerHTML = tracks[index].artist
                        track.innerHTML = tracks[index].track
                    });
                });

                $('.buttons-jazz-stop').on('click', function() {
                    stopAllMusic()
                    artistSpan.innerHTML = ''
                    track.innerHTML = ''
                    removeAllButtonBorders()
                });

                var removeAllButtonBorders = () => {
                    buttons.forEach(
                        button => button.className = "buttons buttons-jazz"
                    )
                }

                var stopAllMusic = () => {
                    audioInstanceArray.forEach(function(audioInstance, index) {
                        audioInstance.pause();
                        audioInstance.currentTime = 0;
                        audioInstanceArray.pop();
                    });
                }
            });
        </script>
    </body>
</html>
