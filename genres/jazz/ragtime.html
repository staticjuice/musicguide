<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Ragtime</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../css/style.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,900" rel="stylesheet">
</head>
  
<body class="genre ragtime">
    <div id="box-jazz">
        <h1>RAGTIME</h1><br>
            
        At the end of the nineteenth century came an important pioneer of Jazz music, known as Ragtime. Inspired by European brass bands, French contredanse and banjo dance music, emerging in any saloon, bar, or bordello in the United States that harbored a piano, and frequently used as background music for old silent films. Ironically Ragtime is the complete opposite of the stereotypical far-west or southern US brothel image: disciplined, structured and calm. Only one person and a piano form this genre. The song structure varies a lot, but is completely written out with no room for improvisation. One hand plays the melody, while the other plays the (also changing) bassline, which creates a certain tension between melody and bass. The name is derived from the earliest examples of these “broken” rhythmic songs, known as “rags”. Remarkably, a revival of Ragtime appeared almost a century later in the seventies. In the early twenties Ragtime evolves into Stride which allows for more improvisation and showmanship. Ragtime and Stride own a lot of their popularity to Foxtrot: a popular dance that emerged in the 1910s.<br><br>

        <div class="row icon-list">
            <div class="col-sm-1 col-xs-1">
                <div class="buttons-jazz">1</div>
            </div>

            <div class="col-sm-1 col-xs-1">
                <div class="buttons-jazz">2</div>
            </div>
                  
            <div class="col-sm-1 col-xs-1">
                <div class="buttons-jazz">3</div>
            </div>
                  
            <div class="col-sm-1 col-xs-1">
                <div class="buttons-jazz">4</div>
            </div>
                
            <div class="col-sm-1 col-xs-1">
                <div class="buttons-jazz">5</div>
            </div>

            <div class="col-sm-1 col-xs-1">
                <div class="buttons-jazz">6</div>
            </div>

            <div class="col-sm-1 col-xs-1">
                <div class="buttons-jazz">7</div>
            </div>

            <div class="col-sm-1 col-xs-1">
                <div class="buttons-jazz">8</div>
            </div>

            <div class="col-sm-1 col-xs-1">
                <div class="buttons-jazz">9</div>
            </div>

            <div class="visible-xs col-xs-1">
                <div class="buttons-jazz-stop">&#9724;</div>
            </div>
        </div>

        <div class="example"><br>
            <p class="artisttrack">Artist: <span id="artist"><span></p><br>
            <p class="artisttrack">Track: <span id="track"></span></p> 
        </div>

        <div class="hidden-xs col-sm-1 stop">
            <div class="buttons-jazz-stop">&#9724;</div>
        </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    
    <script>
        $(document).ready(function() {

            
            var tracks = [
                {
                    artist: "Scott Joplin",
                    track: "The Entertainer",
                    path: "../../samples/jazz/ragtime1.ogg"
                },
                {
                    artist: "Tom Turpin",
                    track: "Harlem Rag",
                    path: "../../samples/jazz/ragtime2.ogg"
                },
                {
                    artist: "Eubie Blake",
                    track: "Charleston Rag",
                    path: "../../samples/jazz/ragtime3.ogg"
                },
                {
                    artist: "James Scott",
                    track: "Frog Legs Rag",
                    path: "../../samples/jazz/ragtime4.ogg"
                },
                {
                    artist: "Joseph Lamb",
                    track: "Champagne Rag",
                    path: "../../samples/jazz/ragtime5.ogg"
                },
                {
                    artist: 'Willie "The Lion" Smith',
                    track: "Finger Buster",
                    path: "../../samples/jazz/ragtime6.ogg"
                },
                {
                    artist: "James P. Johnson",
                    track: "Carolina Shout",
                    path: "../../samples/jazz/ragtime7.ogg"
                },
                {
                    artist: "Dave Tucker",
                    track: "12th Street Rag Medley",
                    path: "../../samples/jazz/ragtime8.ogg"
                },
                {
                    artist: "Jon Brosseau",
                    track: "Grizzly Bear Rag",
                    path: "../../samples/jazz/ragtime9.ogg"
                }
            ]

            var artistSpan = $(document).find('#artist')[0]

            var track = $(document).find('#track')[0]

            var audioInstanceArray = [];

            var buttons = [];

            var audioInstance;

            $(document).find('.buttons-jazz').each(function(index, button) {

                buttons.push(button);
                
                $(this).click(function() {

                    removeAllButtonBorders()

                    $(this).toggleClass('clicked');
                
                    stopAllMusic()

                    audioInstance = new Audio(tracks[index].path);
                    audioInstanceArray.push(audioInstance);
                    audioInstance.play();

                    artistSpan.innerHTML = tracks[index].artist
                    track.innerHTML = tracks[index].track

                });
            });

            $('.buttons-jazz-stop').on('click', function() {

                stopAllMusic()

                artistSpan.innerHTML = ''
                track.innerHTML = ''

                removeAllButtonBorders()

            });

            var removeAllButtonBorders = () => {
                buttons.forEach(
                    button => button.className = "buttons-jazz"
                )
            }

            var stopAllMusic = () => {
                 audioInstanceArray.forEach(function(audioInstance, index) {
                        audioInstance.pause();
                        audioInstance.currentTime = 0;
                        audioInstanceArray.pop();
                    });
            }

        });

    </script>

</body>
</html>