<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
        <link rel="stylesheet" href="../../css/style.css">
        <title>Jazz Fusion</title>
    </head>

    <body id="jazzfusion">
        <div class="box jazz">
            <h1>JAZZ FUSION</h1><div class="year year-jazz">1967</div>

            <p>The original definition of Jazz Fusion was a mixture of Jazz improvisation with the power and rhythms of Rock. Up until around the late 60s, the worlds of Jazz and Rock were nearly completely separate. But as Rock became more creative and its musicianship improved, and as some in the Jazz world became bored with Hard Bop, the two different idioms began to trade ideas and occasionally combine forces. This powerful reinvention became so popular and well-spread, with many derivative genres, that it simply was called "Fusion", although Jazz Rock is also a correct term. Fusion fuses traditional Jazz melody and rhythm and Jazz elements such as improvisation and complex interplay with Rock instruments, amplification and simple harmonies. Rock influences came mostly from Psychedelic Rock, although Fusion artists were also interested in Progressive Rock and during the 70s, there was quite some overlapping between Progressive Rock of that time and Fusion. Jazz Fusion marked the end of a Jazz Era (Modern Jazz) and the beginning of a new one (Electronic Jazz or Post-Jazz).</p>

            <div class="row">
                <div class="col-1"><div class="buttons buttons-jazz">1</div></div>
                <div class="col-1"><div class="buttons buttons-jazz">2</div></div>
                <div class="col-1"><div class="buttons buttons-jazz">3</div></div>
                <div class="col-1"><div class="buttons buttons-jazz">4</div></div>
                <div class="col-1"><div class="buttons buttons-jazz">5</div></div>
                <div class="col-1"><div class="buttons buttons-jazz">6</div></div>
                <div class="col-1"><div class="buttons buttons-jazz">7</div></div>
                <div class="col-1"><div class="buttons buttons-jazz">8</div></div>
                <div class="col-1"><div class="buttons buttons-jazz">9</div></div>
            </div>

            <p class="artisttrack">Artist: <span id="artist"><span></p><br>
            <p class="artisttrack">Track: <span id="track"></span></p>
            <div class="col-1 stop"><div class="buttons buttons-jazz-stop">&FilledSmallSquare;</div></div>
        </div>

        <script src="https://code.jquery.com/jquery-3.6.1.slim.min.js" integrity="sha256-w8CvhFs7iHNVUtnSP0YKEg00p9Ih13rlL9zGqvLdePA=" crossorigin="anonymous"></script>

        <script>
            $(document).ready(function() {
                var tracks = [
                    {
                        artist: "Miles Davis",
                        track: "Bitches Brew",
                        path: "../../samples/jazz/jazzfusion1.ogg"
                    },
                    {
                        artist: "Weather Report",
                        track: "Birdland",
                        path: "../../samples/jazz/jazzfusion2.ogg"
                    },
                    {
                        artist: "Billy Cobham",
                        track: "Stratus",
                        path: "../../samples/jazz/jazzfusion3.ogg"
                    },
                    {
                        artist: "Return To Forever",
                        track: "Sorceress",
                        path: "../../samples/jazz/jazzfusion4.ogg"
                    },
                    {
                        artist: "Tony Williams",
                        track: "Sweet Revenge",
                        path: "../../samples/jazz/jazzfusion5.ogg"
                    },
                    {
                        artist: "Mahavishnu Orchestra",
                        track: "Vital Transformation",
                        path: "../../samples/jazz/jazzfusion6.ogg"
                    },
                    {
                        artist: "Stanley Clarke",
                        track: "School Days",
                        path: "../../samples/jazz/jazzfusion7.ogg"
                    },
                    {
                        artist: "Chick Corea",
                        track: "Dance Of Chance",
                        path: "../../samples/jazz/jazzfusion8.ogg"
                    },
                    {
                        artist: "Frank Zappa",
                        track: "Apostrophe (')",
                        path: "../../samples/jazz/jazzfusion9.ogg"
                    }
                ]

                tracks.forEach(track => {
                    const audio = new Audio()
                    audio.addEventListener('canplaythrough', null, false)
                    audio.src = track.path
                })

                var artistSpan = $(document).find('#artist')[0]
                var track = $(document).find('#track')[0]
                var audioInstanceArray = [];
                var buttons = [];
                var audioInstance;

                $(document).find('.buttons-jazz').each(function(index, button) {
                    buttons.push(button);
                    $(this).click(function() {
                        removeAllButtonBorders()
                        $(this).toggleClass('clicked');
                        stopAllMusic()
                        audioInstance = new Audio(tracks[index].path);
                        audioInstanceArray.push(audioInstance);
                        audioInstance.play();
                        artistSpan.innerHTML = tracks[index].artist
                        track.innerHTML = tracks[index].track
                    });
                });

                $('.buttons-jazz-stop').on('click', function() {
                    stopAllMusic()
                    artistSpan.innerHTML = ''
                    track.innerHTML = ''
                    removeAllButtonBorders()
                });

                var removeAllButtonBorders = () => {
                    buttons.forEach(
                        button => button.className = "buttons buttons-jazz"
                    )
                }

                var stopAllMusic = () => {
                    audioInstanceArray.forEach(function(audioInstance, index) {
                        audioInstance.pause();
                        audioInstance.currentTime = 0;
                        audioInstanceArray.pop();
                    });
                }
            });
        </script>
    </body>
</html>
