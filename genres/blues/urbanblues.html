<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="../../css/bootstrap.css">
        <link rel="stylesheet" href="../../css/style.css">
        <title>Urban Blues</title>
    </head>

    <body id="urbanblues">
        <div class="box blues">
            <h1>URBAN BLUES</h1><div class="year year-blues">1948</div>

            <p>Urban Blues has been around since the Great Depression. Slowly the genre developed during the 30s and 40s, albeit in a much different way than what is usually referred to as Urban Blues. What is now referred to as the classic Urban Blues style was developed in the late 40s and early 50s, taking Country Blues, fully amplifying it and putting it into a small-band context. Adding drums, bass, piano and sometimes saxophones to the basic string band and harmonica aggregation, the style created the now standard Blues band lineup. The form was flexible to accommodate singers, guitarists, pianists and harmonica players as the featured performer in front of the standard instrumentation. Later permutations of the style took place in the late 50s and early 60s, with new blood taking their cue from the lead guitar work of B.B. King and T-Bone Walker, creating the popular west side subgenre (which usually featured a horn section appended to the basic rhythm section). Although the form has also embraced Rock beats, it has generally stayed within the guidelines developed in the 50s and early 60s.</p>

            <div class="row">
                <div class="col-1"><div class="buttons buttons-blues">1</div></div>
                <div class="col-1"><div class="buttons buttons-blues">2</div></div>
                <div class="col-1"><div class="buttons buttons-blues">3</div></div>
                <div class="col-1"><div class="buttons buttons-blues">4</div></div>
                <div class="col-1"><div class="buttons buttons-blues">5</div></div>
                <div class="col-1"><div class="buttons buttons-blues">6</div></div>
                <div class="col-1"><div class="buttons buttons-blues">7</div></div>
                <div class="col-1"><div class="buttons buttons-blues">8</div></div>
                <div class="col-1"><div class="buttons buttons-blues">9</div></div>
            </div>

            <p class="artisttrack">Artist: <span id="artist"><span></p><br>
            <p class="artisttrack">Track: <span id="track"></span></p>
            <div class="col-1 stop"><div class="buttons buttons-blues-stop">&FilledSmallSquare;</div></div>
        </div>

        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>

        <script>
            $(document).ready(function() {
                var tracks = [
                    {
                        artist: "Howlin' Wolf",
                        track: "Spoonful",
                        path: "../../samples/blues/urbanblues1.ogg"
                    },
                    {
                        artist: "Elmore James",
                        track: "The Sky Is Crying",
                        path: "../../samples/blues/urbanblues2.ogg"
                    },
                    {
                        artist: "Jimmy Reed",
                        track: "Shame, Shame, Shame",
                        path: "../../samples/blues/urbanblues3.ogg"
                    },
                    {
                        artist: "Junior Wells",
                        track: "Messin' With The Kid",
                        path: "../../samples/blues/urbanblues4.ogg"
                    },
                    {
                        artist: "Willie Dixon",
                        track: "Back Door Man",
                        path: "../../samples/blues/urbanblues5.ogg"
                    },
                    {
                        artist: "Sonny Boy Williamson II",
                        track: "All My Love In Vain",
                        path: "../../samples/blues/urbanblues6.ogg"
                    },
                    {
                        artist: "Magic Sam",
                        track: "Sweet Home Chicago",
                        path: "../../samples/blues/urbanblues7.ogg"
                    },
                    {
                        artist: "John Lee Hooker",
                        track: "Boom Boom",
                        path: "../../samples/blues/urbanblues8.ogg"
                    },
                    {
                        artist: "Little Walter",
                        track: "Blue And Lonesome",
                        path: "../../samples/blues/urbanblues9.ogg"
                    }
                ]

                tracks.forEach(track => {
                    const audio = new Audio()
                    audio.addEventListener('canplaythrough', null, false)
                    audio.src = track.path
                })

                var artistSpan = $(document).find('#artist')[0]
                var track = $(document).find('#track')[0]
                var audioInstanceArray = [];
                var buttons = [];
                var audioInstance;

                $(document).find('.buttons-blues').each(function(index, button) {
                    buttons.push(button);
                    $(this).click(function() {
                        removeAllButtonBorders()
                        $(this).toggleClass('clicked');
                        stopAllMusic()
                        audioInstance = new Audio(tracks[index].path);
                        audioInstanceArray.push(audioInstance);
                        audioInstance.play();
                        artistSpan.innerHTML = tracks[index].artist
                        track.innerHTML = tracks[index].track
                    });
                });

                $('.buttons-blues-stop').on('click', function() {
                    stopAllMusic()
                    artistSpan.innerHTML = ''
                    track.innerHTML = ''
                    removeAllButtonBorders()
                });

                var removeAllButtonBorders = () => {
                    buttons.forEach(
                        button => button.className = "buttons buttons-blues"
                    )
                }

                var stopAllMusic = () => {
                    audioInstanceArray.forEach(function(audioInstance, index) {
                        audioInstance.pause();
                        audioInstance.currentTime = 0;
                        audioInstanceArray.pop();
                    });
                }
            });
        </script>
    </body>
</html>
