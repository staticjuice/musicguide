<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="../../css/bootstrap.css">
        <link rel="stylesheet" href="../../css/style.css">
        <title>Chinese Folk</title>
    </head>

    <body class="genre" id="chinesefolk">
        <div class="box folk">
            <h1>CHINESE FOLK</h1>

            <p>Chinese music may refer to the music of the Han Chinese as well as other ethnic minorities within mainland China. It also includes music produced by people of Chinese origin in some territories outside mainland China using traditional Chinese instruments or in the Chinese language. Different types of music have been recorded in historical Chinese documents from the early periods of Chinese civilization which &ndash; together with archaeological artefacts discovered &ndash; provided evidence of a well-developed musical culture as early as the Zhou Dynasty (1122 BCE to 256 BCE). These further developed into various forms of music through succeeding dynasties, producing the rich heritage of music that is part of the Chinese cultural landscape today. Chinese music continues to evolve in modern times, and more contemporary forms have also emerged. According to legends, the founder of music in Chinese mythology was Ling Lun who &ndash; at the request of the Yellow Emperor to create a system of music &ndash; made bamboo pipes tuned to the sounds of birds &ndash; including the phoenix.</p>

            <div class="row icon-list">
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-folk">1</div></div>
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-folk">2</div></div>
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-folk">3</div></div>
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-folk">4</div></div>
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-folk">5</div></div>
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-folk">6</div></div>
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-folk">7</div></div>
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-folk">8</div></div>
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-folk">9</div></div>
                <div class="d-lg-none col-lg-1 col-xs-1"><div class="buttons buttons-folk-stop">&FilledSmallSquare;</div></div>
            </div>

            <p class="artisttrack">Artist: <span id="artist"><span></p><br>
            <p class="artisttrack">Track: <span id="track"></span></p>
            <div class="d-none d-lg-block col-md-1 stop"><div class="buttons buttons-folk-stop">&FilledSmallSquare;</div></div>
        </div>

        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>

        <script>
            $(document).ready(function() {
                var tracks = [
                    {
                        artist: "Xu Jiangde",
                        track: "Willow In The Spring Breeze",
                        path: "../../samples/folk/chinesefolk1.ogg"
                    },
                    {
                        artist: "Chen Zhong",
                        track: "Six Clappers In Zhong Hua",
                        path: "../../samples/folk/chinesefolk2.ogg"
                    },
                    {
                        artist: "Hu Haiquan",
                        track: "One Flower",
                        path: "../../samples/folk/chinesefolk3.ogg"
                    },
                    {
                        artist: "Xiao Ying",
                        track: "Spring On Snowy Mountains",
                        path: "../../samples/folk/chinesefolk4.ogg"
                    },
                    {
                        artist: "The Beijing Instrumental Ensemble",
                        track: "Moonlight Dancing Song",
                        path: "../../samples/folk/chinesefolk5.ogg"
                    },
                    {
                        artist: "Ming Flute Ensemble",
                        track: "The Song Of The Four Seasons",
                        path: "../../samples/folk/chinesefolk6.ogg"
                    },
                    {
                        artist: "Pan Jing & Ensemble",
                        track: "A Journey To Suzhou",
                        path: "../../samples/folk/chinesefolk7.ogg"
                    },
                    {
                        artist: "Chinese Plucked Instruments Quintet",
                        track: "Flowing Spring On The Rock",
                        path: "../../samples/folk/chinesefolk8.ogg"
                    },
                    {
                        artist: "Jiangsu Art Troupe Folk Music Band",
                        track: "A Reed Catkin",
                        path: "../../samples/folk/chinesefolk9.ogg"
                    }
                ]

                tracks.forEach(track => {
                    const audio = new Audio()
                    audio.addEventListener('canplaythrough', null, false)
                    audio.src = track.path
                })

                var artistSpan = $(document).find('#artist')[0]
                var track = $(document).find('#track')[0]
                var audioInstanceArray = [];
                var buttons = [];
                var audioInstance;

                $(document).find('.buttons-folk').each(function(index, button) {
                    buttons.push(button);
                    $(this).click(function() {
                        removeAllButtonBorders()
                        $(this).toggleClass('clicked');
                        stopAllMusic()
                        audioInstance = new Audio(tracks[index].path);
                        audioInstanceArray.push(audioInstance);
                        audioInstance.play();
                        artistSpan.innerHTML = tracks[index].artist
                        track.innerHTML = tracks[index].track
                    });
                });

                $('.buttons-folk-stop').on('click', function() {
                    stopAllMusic()
                    artistSpan.innerHTML = ''
                    track.innerHTML = ''
                    removeAllButtonBorders()
                });

                var removeAllButtonBorders = () => {
                    buttons.forEach(
                        button => button.className = "buttons buttons-folk"
                    )
                }

                var stopAllMusic = () => {
                    audioInstanceArray.forEach(function(audioInstance, index) {
                        audioInstance.pause();
                        audioInstance.currentTime = 0;
                        audioInstanceArray.pop();
                    });
                }
            });
        </script>
    </body>
</html>
