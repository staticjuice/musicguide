<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,900">
        <link rel="stylesheet" href="../../css/style.css">
        <title>Spanish Folk</title>
    </head>

    <body class="genre" id="spanishfolk">
        <div class="box folk">
            <h1>SPANISH FOLK</h1>

            <p>The music of Spain has a long history and has played an important role in the development of Western music and has greatly influenced Latin American music. Spanish music is often associated with traditional styles such as Flamenco and classical guitar. While these forms of music are common, there are many different traditional musical and dance styles across the regions. For example, music from the north-west regions is heavily reliant on bagpipes, the jota is widespread in the centre and north of the country and Flamenco originated in the south. Spanish music played a notable part in the early developments of western Classical music, from the 15th through the early 17th century. The breadth of musical innovation can be seen in composers like Tomás Luis de Victoria, styles like the Zarzuela of Spanish Opera, the ballet of Manuel de Falla, and the classical guitar music of Francisco Tárrega. There is also a movement of singer-songwriters with politically-active lyrics, paralleling similar developments in Latin America and Portugal. Nowadays commercial Pop music dominates the region.</p>

            <div class="row icon-list">
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-folk">1</div></div>
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-folk">2</div></div>
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-folk">3</div></div>
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-folk">4</div></div>
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-folk">5</div></div>
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-folk">6</div></div>
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-folk">7</div></div>
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-folk">8</div></div>
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-folk">9</div></div>
                <div class="d-block d-md-none col-md-1 col-xs-1"><div class="buttons buttons-folk-stop">&#9724;</div></div>
            </div>

            <div class="example">
                <p class="artisttrack">Artist: <span id="artist"><span></p><br>
                <p class="artisttrack">Track: <span id="track"></span></p>
            </div>

            <div class="d-none d-md-block col-md-1 stop"><div class="buttons buttons-folk-stop">&#9724;</div></div>
        </div>

        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

        <script>
            $(document).ready(function() {
                var tracks = [
                    {
                        artist: "Jota Aragonesa",
                        track: "Un Baturro Subió Al Cielo",
                        path: "../../samples/folk/spanishfolk1.ogg"
                    },
                    {
                        artist: "A Quenlla",
                        track: "Rumboia",
                        path: "../../samples/folk/spanishfolk2.ogg"
                    },
                    {
                        artist: "Radio Cos",
                        track: "Muiñeira Da Despedida",
                        path: "../../samples/folk/spanishfolk3.ogg"
                    },
                    {
                        artist: "Manuel Luna",
                        track: "Flor De Almendra",
                        path: "../../samples/folk/spanishfolk4.ogg"
                    },
                    {
                        artist: "A Puro Viento",
                        track: "Metéle Que El Tuerto Paga",
                        path: "../../samples/folk/spanishfolk5.ogg"
                    },
                    {
                        artist: "Roi Casel & Laritza Bacallao",
                        track: "Abrazongo",
                        path: "../../samples/folk/spanishfolk6.ogg"
                    },
                    {
                        artist: "Música Nostra",
                        track: "Jota De Sa Guitarra",
                        path: "../../samples/folk/spanishfolk7.ogg"
                    },
                    {
                        artist: "Hermanos Anoz",
                        track: "El Campanero",
                        path: "../../samples/folk/spanishfolk8.ogg"
                    },
                    {
                        artist: "Azarbe",
                        track: "Amor Que Me Das",
                        path: "../../samples/folk/spanishfolk9.ogg"
                    }
                ]

                tracks.forEach(track => {
                    const audio = new Audio()
                    audio.addEventListener('canplaythrough', null, false)
                    audio.src = track.path
                })

                var artistSpan = $(document).find('#artist')[0]
                var track = $(document).find('#track')[0]
                var audioInstanceArray = [];
                var buttons = [];
                var audioInstance;

                $(document).find('.buttons-folk').each(function(index, button) {
                    buttons.push(button);
                    $(this).click(function() {
                        removeAllButtonBorders()
                        $(this).toggleClass('clicked');
                        stopAllMusic()
                        audioInstance = new Audio(tracks[index].path);
                        audioInstanceArray.push(audioInstance);
                        audioInstance.play();
                        artistSpan.innerHTML = tracks[index].artist
                        track.innerHTML = tracks[index].track
                    });
                });

                $('.buttons-folk-stop').on('click', function() {
                    stopAllMusic()
                    artistSpan.innerHTML = ''
                    track.innerHTML = ''
                    removeAllButtonBorders()
                });

                var removeAllButtonBorders = () => {
                    buttons.forEach(
                        button => button.className = "buttons buttons-folk"
                    )
                }

                var stopAllMusic = () => {
                    audioInstanceArray.forEach(function(audioInstance, index) {
                        audioInstance.pause();
                        audioInstance.currentTime = 0;
                        audioInstanceArray.pop();
                    });
                }
            });
        </script>
    </body>
</html>
