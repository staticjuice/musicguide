<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="../../css/bootstrap.css">
        <link rel="stylesheet" href="../../css/style.css">
        <title>Russian Folk</title>
    </head>

    <body id="russianfolk">
        <div class="box folk">
            <h1>RUSSIAN FOLK</h1>

            <p>The performance and promulgation of ethnic music in Russia has a long tradition. Initially it was intertwined with various forms of art music, however, in the late 19th century it began to take on a life of its own with the rise in popularity of folkloric ensembles, such as the Folk choir movement. In Soviet Russia, Folk music was categorised as being democratic (of the people) or proletarian (of the working class) as opposed to art music, which was often regarded as being bourgeois. After the revolution, along with Proletarian "mass music" it received significant support from the state. In Post World War II Russia, Proletarian mass music lost its appeal, whereas folkloric music continued to have widespread support among the population, inside and outside of the Soviet Union. However, the authentic nature of Folk music was severely distorted by the drive to professionalise performers, regardless of the genre they worked in &ndash; thus all folk singers were obliged to both learn Western-style classical notation, and to learn to perform classical repertoire &ndash; or else risk losing their right to perform as professionals.</p>

            <div class="row">
                <div class="col-1"><div class="buttons buttons-folk">1</div></div>
                <div class="col-1"><div class="buttons buttons-folk">2</div></div>
                <div class="col-1"><div class="buttons buttons-folk">3</div></div>
                <div class="col-1"><div class="buttons buttons-folk">4</div></div>
                <div class="col-1"><div class="buttons buttons-folk">5</div></div>
                <div class="col-1"><div class="buttons buttons-folk">6</div></div>
                <div class="col-1"><div class="buttons buttons-folk">7</div></div>
                <div class="col-1"><div class="buttons buttons-folk">8</div></div>
                <div class="col-1"><div class="buttons buttons-folk">9</div></div>
            </div>

            <p class="artisttrack">Artist: <span id="artist"><span></p><br>
            <p class="artisttrack">Track: <span id="track"></span></p>
            <div class="col-1 stop"><div class="buttons buttons-folk-stop">&FilledSmallSquare;</div></div>
        </div>

        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>

        <script>
            $(document).ready(function() {
                var tracks = [
                    {
                        artist: "Moscow Nights",
                        track: "Katusha",
                        path: "../../samples/folk/russianfolk1.ogg"
                    },
                    {
                        artist: "Limpopo",
                        track: "Katiusha",
                        path: "../../samples/folk/russianfolk2.ogg"
                    },
                    {
                        artist: "From Russia With Love Choir",
                        track: "Moonlight",
                        path: "../../samples/folk/russianfolk3.ogg"
                    },
                    {
                        artist: "Andreyev Balalaika Ensemble",
                        track: "Korobushka",
                        path: "../../samples/folk/russianfolk4.ogg"
                    },
                    {
                        artist: "Ivan Rebroff",
                        track: "Katjuscha, Katjuscha",
                        path: "../../samples/folk/russianfolk5.ogg"
                    },
                    {
                        artist: "Boris Rubaschkin",
                        track: "Syp, Simeon",
                        path: "../../samples/folk/russianfolk6.ogg"
                    },
                    {
                        artist: "Galina Zuzina",
                        track: "Utuska Lugovaja",
                        path: "../../samples/folk/russianfolk7.ogg"
                    },
                    {
                        artist: "Merab Megrely",
                        track: "Russia, My Motherland",
                        path: "../../samples/folk/russianfolk8.ogg"
                    },
                    {
                        artist: "Oleg Ukhalev",
                        track: "A Soldier Is Always A Soldier",
                        path: "../../samples/folk/russianfolk9.ogg"
                    }
                ]

                tracks.forEach(track => {
                    const audio = new Audio()
                    audio.addEventListener('canplaythrough', null, false)
                    audio.src = track.path
                })

                var artistSpan = $(document).find('#artist')[0]
                var track = $(document).find('#track')[0]
                var audioInstanceArray = [];
                var buttons = [];
                var audioInstance;

                $(document).find('.buttons-folk').each(function(index, button) {
                    buttons.push(button);
                    $(this).click(function() {
                        removeAllButtonBorders()
                        $(this).toggleClass('clicked');
                        stopAllMusic()
                        audioInstance = new Audio(tracks[index].path);
                        audioInstanceArray.push(audioInstance);
                        audioInstance.play();
                        artistSpan.innerHTML = tracks[index].artist
                        track.innerHTML = tracks[index].track
                    });
                });

                $('.buttons-folk-stop').on('click', function() {
                    stopAllMusic()
                    artistSpan.innerHTML = ''
                    track.innerHTML = ''
                    removeAllButtonBorders()
                });

                var removeAllButtonBorders = () => {
                    buttons.forEach(
                        button => button.className = "buttons buttons-folk"
                    )
                }

                var stopAllMusic = () => {
                    audioInstanceArray.forEach(function(audioInstance, index) {
                        audioInstance.pause();
                        audioInstance.currentTime = 0;
                        audioInstanceArray.pop();
                    });
                }
            });
        </script>
    </body>
</html>
