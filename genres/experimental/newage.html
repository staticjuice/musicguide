<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="../../css/bootstrap.css">
        <link rel="stylesheet" href="../../css/style.css">
        <title>New Age</title>
    </head>

    <body id="newage">
        <div class="box experimental">
            <h1>NEW AGE</h1>

            <p>Two evolutions in the 70s laid the foundations for New Age. On the one hand, there was the introduction of nature sounds in Ambient music. Music did not need to repulse the environment but could be the voice of the environment &ndash; preferably a beautiful and escapist one. On the other hand, there was the rise of unprecedented heavy, macho music such as Heavy Metal. Hereby, record stores saw a steady increase in demand in the opposite genre. With the spotlights on so much noise and teen-orientated music, many people craved music with a sense of calmness. New Age is often a careful balance of both acoustic and electronic instruments, which is unique among genres. Though a lot of New Age is instrumental, soothing voices are not uncommon. The overall tempo is very low (50-60 BPM) and transitions occur gradually and smoothly. New Age caresses the mind with trembling timbres and stimulates the body with an inner rhythm. But New Age is more than a music genre. The urge for nature-connected, tranquillizing music is intertwined with the birth of an affined spiritual subculture also known as New Age.</p>

            <div class="row icon-list">
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-experimental">1</div></div>
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-experimental">2</div></div>
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-experimental">3</div></div>
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-experimental">4</div></div>
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-experimental">5</div></div>
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-experimental">6</div></div>
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-experimental">7</div></div>
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-experimental">8</div></div>
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-experimental">9</div></div>
                <div class="d-lg-none col-lg-1 col-xs-1"><div class="buttons buttons-experimental-stop">&FilledSmallSquare;</div></div>
            </div>

            <p class="artisttrack">Artist: <span id="artist"><span></p><br>
            <p class="artisttrack">Track: <span id="track"></span></p>
            <div class="d-none d-lg-block col-md-1 stop"><div class="buttons buttons-experimental-stop">&FilledSmallSquare;</div></div>
        </div>

        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>

        <script>
            $(document).ready(function() {
                var tracks = [
                    {
                        artist: "Enya",
                        track: "Orinoco Flow",
                        path: "../../samples/experimental/newage1.ogg"
                    },
                    {
                        artist: "Boko Suzuki",
                        track: "Spirit, Breath And Movement",
                        path: "../../samples/experimental/newage2.ogg"
                    },
                    {
                        artist: "Medwyn Goodall",
                        track: "Crystal Alignment",
                        path: "../../samples/experimental/newage3.ogg"
                    },
                    {
                        artist: "Nicholas Gunn",
                        track: "Entering Twin Falls",
                        path: "../../samples/experimental/newage4.ogg"
                    },
                    {
                        artist: "Karl Jenkins",
                        track: "Adiemus",
                        path: "../../samples/experimental/newage5.ogg"
                    },
                    {
                        artist: "Chris Spheeris",
                        track: "Kingdom In The Clouds",
                        path: "../../samples/experimental/newage6.ogg"
                    },
                    {
                        artist: "Secret Garden",
                        track: "Sleepsong",
                        path: "../../samples/experimental/newage7.ogg"
                    },
                    {
                        artist: "Loreena McKennitt",
                        track: "Snow",
                        path: "../../samples/experimental/newage8.ogg"
                    },
                    {
                        artist: "Enigma",
                        track: "The Child In Us",
                        path: "../../samples/experimental/newage9.ogg"
                    }
                ]

                tracks.forEach(track => {
                    const audio = new Audio()
                    audio.addEventListener('canplaythrough', null, false)
                    audio.src = track.path
                })

                var artistSpan = $(document).find('#artist')[0]
                var track = $(document).find('#track')[0]
                var audioInstanceArray = [];
                var buttons = [];
                var audioInstance;

                $(document).find('.buttons-experimental').each(function(index, button) {
                    buttons.push(button);
                    $(this).click(function() {
                        removeAllButtonBorders()
                        $(this).toggleClass('clicked');
                        stopAllMusic()
                        audioInstance = new Audio(tracks[index].path);
                        audioInstanceArray.push(audioInstance);
                        audioInstance.play();
                        artistSpan.innerHTML = tracks[index].artist
                        track.innerHTML = tracks[index].track
                    });
                });

                $('.buttons-experimental-stop').on('click', function() {
                    stopAllMusic()
                    artistSpan.innerHTML = ''
                    track.innerHTML = ''
                    removeAllButtonBorders()
                });

                var removeAllButtonBorders = () => {
                    buttons.forEach(
                        button => button.className = "buttons buttons-experimental"
                    )
                }

                var stopAllMusic = () => {
                    audioInstanceArray.forEach(function(audioInstance, index) {
                        audioInstance.pause();
                        audioInstance.currentTime = 0;
                        audioInstanceArray.pop();
                    });
                }
            });
        </script>
    </body>
</html>
