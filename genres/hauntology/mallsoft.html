<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="../../css/bootstrap.css">
        <link rel="stylesheet" href="../../css/style.css">
        <title>Mallsoft</title>
    </head>

    <body id="mallsoft">
        <div class="box hauntology">
            <h1>MALLSOFT</h1>

            <p>Mallsoft is distinct from its cousin Vaporwave by using ethereal, vague music that is very easily looped as "background" music. The genius of Mallsoft is that it's not meant to be paid attention to, it's not distinct. It's meant to be left on repeat while the "listener" does other things. The repetition of the music eventually forces its way into the listener's mind subconsciously, to be recalled at later date as a memory of something that may or may not have happened. The origins of Mallsoft lie in the earliest explorations of Vaporwave, where the concept of malls as large, soulless spaces of consumerism were evoked in some practitioner's utilisation of Vaporwave as a means of exploring the social ramifications of capitalism and globalisation. While that approach has largely petered out in favour of pure sonic exploration/expression, Mallsoft is one of the few subgenres where such a concept is intrinsic to its being. The purpose of Mallsoft is to evoke the feeling of walking through an abandoned (or hyper-populated) mall, with the PA speakers playing the same poorly-mixed tunes that haven't been updated since they were put to corporate tape in the 80s.</p>

            <div class="row icon-list">
                <div class="col-1"><div class="buttons buttons-hauntology">1</div></div>
                <div class="col-1"><div class="buttons buttons-hauntology">2</div></div>
                <div class="col-1"><div class="buttons buttons-hauntology">3</div></div>
                <div class="col-1"><div class="buttons buttons-hauntology">4</div></div>
                <div class="col-1"><div class="buttons buttons-hauntology">5</div></div>
                <div class="col-1"><div class="buttons buttons-hauntology">6</div></div>
                <div class="col-1"><div class="buttons buttons-hauntology">7</div></div>
                <div class="col-1"><div class="buttons buttons-hauntology">8</div></div>
                <div class="col-1"><div class="buttons buttons-hauntology">9</div></div>
            </div>

            <p class="artisttrack">Artist: <span id="artist"><span></p><br>
            <p class="artisttrack">Track: <span id="track"></span></p>
            <div class="col-1 stop"><div class="buttons buttons-hauntology-stop">&FilledSmallSquare;</div></div>
        </div>

        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>

        <script>
            $(document).ready(function() {
                var tracks = [
                    {
                        artist: "식료품groceries",
                        track: "Intrance (Realities)",
                        path: "../../samples/hauntology/mallsoft1.ogg"
                    },
                    {
                        artist: "Incorporeal Visions Deluxe",
                        track: "Causal Work Attire",
                        path: "../../samples/hauntology/mallsoft2.ogg"
                    },
                    {
                        artist: "猫 シ Corp.",
                        track: "FORUM 消 費 者[kuluttaja]",
                        path: "../../samples/hauntology/mallsoft3.ogg"
                    },
                    {
                        artist: "Vapora",
                        track: "Visitor Center",
                        path: "../../samples/hauntology/mallsoft4.ogg"
                    },
                    {
                        artist: "18 Carat Affair",
                        track: "Mall Shopping",
                        path: "../../samples/hauntology/mallsoft5.ogg"
                    },
                    {
                        artist: "NetMD",
                        track: "Department Store",
                        path: "../../samples/hauntology/mallsoft6.ogg"
                    },
                    {
                        artist: "Wolfenstein OS X",
                        track: "Grocery Shopping",
                        path: "../../samples/hauntology/mallsoft7.ogg"
                    },
                    {
                        artist: "PowerPCME",
                        track: "The Kmart Dream",
                        path: "../../samples/hauntology/mallsoft8.ogg"
                    },
                    {
                        artist: "Sam Clunie",
                        track: "Shopping Mall Elevator",
                        path: "../../samples/hauntology/mallsoft9.ogg"
                    }
                ]

                tracks.forEach(track => {
                    const audio = new Audio()
                    audio.addEventListener('canplaythrough', null, false)
                    audio.src = track.path
                })

                var artistSpan = $(document).find('#artist')[0]
                var track = $(document).find('#track')[0]
                var audioInstanceArray = [];
                var buttons = [];
                var audioInstance;

                $(document).find('.buttons-hauntology').each(function(index, button) {
                    buttons.push(button);
                    $(this).click(function() {
                        removeAllButtonBorders()
                        $(this).toggleClass('clicked');
                        stopAllMusic()
                        audioInstance = new Audio(tracks[index].path);
                        audioInstanceArray.push(audioInstance);
                        audioInstance.play();
                        artistSpan.innerHTML = tracks[index].artist
                        track.innerHTML = tracks[index].track
                    });
                });

                $('.buttons-hauntology-stop').on('click', function() {
                    stopAllMusic()
                    artistSpan.innerHTML = ''
                    track.innerHTML = ''
                    removeAllButtonBorders()
                });

                var removeAllButtonBorders = () => {
                    buttons.forEach(
                        button => button.className = "buttons buttons-hauntology"
                    )
                }

                var stopAllMusic = () => {
                    audioInstanceArray.forEach(function(audioInstance, index) {
                        audioInstance.pause();
                        audioInstance.currentTime = 0;
                        audioInstanceArray.pop();
                    });
                }
            });
        </script>
    </body>
</html>
