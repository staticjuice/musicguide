<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Progressive Metal</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../css/style.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,900" rel="stylesheet">
</head>
  
<body class="genre progressivemetal">
    <div id="box-metal">
        <h1>PROGRESSIVE METAL</h1><br>
            
        A few Metal bands (eventually more and more) could not be classified within any existing genre. The Metal community, more obsessed with genres and classification than any other music community, came up with Progressive Metal or Prog Metal. Yet it would be too easy to discard Progressive Metal as a residual non-genre. Progressive Metal first surfaced in the late 80s, led by such bands as Queensrÿche. In the footsteps of Progressive Rock, Prog Metal bands experiment with long, elaborately structured songs and adding classical or exotic elements. They thrive to make Metal sound more intense, crisp and clean, yet unpredictable and non-formal. By doing so, Prog Metal also sounds somewhat less heavy and thus gained less appeal. Most Progressive Metal uses more sound layers or tracks than other Metal genres, accompanied by a steady rhythm. Prog Metal sounds like the delicate middle ground between Power Metal, Gothic Metal and Thrash Metal. In this quest for metallic perfection, only a tiny handful of bands became known. The others remained shrouded in obscurity that they tended to embrace.<br><br>

        <div class="row icon-list">
            <div class="col-sm-1 col-xs-1">
                <div class="buttons-metal">1</div>
            </div>

            <div class="col-sm-1 col-xs-1">
                <div class="buttons-metal">2</div>
            </div>
                  
            <div class="col-sm-1 col-xs-1">
                <div class="buttons-metal">3</div>
            </div>
                  
            <div class="col-sm-1 col-xs-1">
                <div class="buttons-metal">4</div>
            </div>
                
            <div class="col-sm-1 col-xs-1">
                <div class="buttons-metal">5</div>
            </div>

            <div class="col-sm-1 col-xs-1">
                <div class="buttons-metal">6</div>
            </div>

            <div class="col-sm-1 col-xs-1">
                <div class="buttons-metal">7</div>
            </div>

            <div class="col-sm-1 col-xs-1">
                <div class="buttons-metal">8</div>
            </div>

            <div class="col-sm-1 col-xs-1">
                <div class="buttons-metal">9</div>
            </div>

            <div class="visible-xs col-xs-1">
                <div class="buttons-metal-stop">&#9724;</div>
            </div>
        </div>

        <div class="example"><br>
            <p class="artisttrack">Artist: <span id="artist"><span></p><br>
            <p class="artisttrack">Track: <span id="track"></span></p> 
        </div>

        <div class="hidden-xs col-sm-1 stop">
            <div class="buttons-metal-stop">&#9724;</div>
        </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    
    <script>
        $(document).ready(function() {

            
            var tracks = [
                {
                    artist: "Queensrÿche",
                    track: "Anarchy-X",
                    path: "../../samples/metal/progressivemetal1.ogg"
                },
                {
                    artist: "Dream Theater",
                    track: "Pull Me Under",
                    path: "../../samples/metal/progressivemetal2.ogg"
                },
                {
                    artist: "Symphony X",
                    track: "Nevermore",
                    path: "../../samples/metal/progressivemetal3.ogg"
                },
                {
                    artist: "Fates Warning",
                    track: "Guardian",
                    path: "../../samples/metal/progressivemetal4.ogg"
                },
                {
                    artist: "Meshuggah",
                    track: "Dancers To A Discordant System",
                    path: "../../samples/metal/progressivemetal5.ogg"
                },
                {
                    artist: "Tool",
                    track: "Rosetta Stoned",
                    path: "../../samples/metal/progressivemetal6.ogg"
                },
                {
                    artist: "Pain Of Salvation",
                    track: "Iter Impius",
                    path: "../../samples/metal/progressivemetal7.ogg"
                },
                {
                    artist: "Threshold",
                    track: "Unforgiven",
                    path: "../../samples/metal/progressivemetal8.ogg"
                },
                {
                    artist: "Evergrey",
                    track: "The Grand Collapse",
                    path: "../../samples/metal/progressivemetal9.ogg"
                }
            ]

            tracks.forEach(track => {
                const audio = new Audio()
                audio.addEventListener('canplaythrough', null, false)
                audio.src = track.path
            })

            var artistSpan = $(document).find('#artist')[0]

            var track = $(document).find('#track')[0]

            var audioInstanceArray = [];

            var buttons = [];

            var audioInstance;

            $(document).find('.buttons-metal').each(function(index, button) {

                buttons.push(button);
                
                $(this).click(function() {

                    removeAllButtonBorders()

                    $(this).toggleClass('clicked');
                
                    stopAllMusic()

                    audioInstance = new Audio(tracks[index].path);
                    audioInstanceArray.push(audioInstance);
                    audioInstance.play();

                    artistSpan.innerHTML = tracks[index].artist
                    track.innerHTML = tracks[index].track

                });
            });

            $('.buttons-metal-stop').on('click', function() {

                stopAllMusic()

                artistSpan.innerHTML = ''
                track.innerHTML = ''

                removeAllButtonBorders()

            });

            var removeAllButtonBorders = () => {
                buttons.forEach(
                    button => button.className = "buttons-metal"
                )
            }

            var stopAllMusic = () => {
                 audioInstanceArray.forEach(function(audioInstance, index) {
                        audioInstance.pause();
                        audioInstance.currentTime = 0;
                        audioInstanceArray.pop();
                    });
            }

        });

    </script>

</body>
</html>