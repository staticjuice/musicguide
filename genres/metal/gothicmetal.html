<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Gothic Metal</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../css/style.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,900" rel="stylesheet">
</head>
  
<body class="genre gothicmetal">
    <div id="box-metal">
        <h1>GOTHIC METAL</h1><br>
            
        Eventually the melancholic, haunting sounds of Goth Rock found their way to Metal. The energy and wildness of other Metal was incompatible with Goth, but the much slower, darker Doom and Stoner Metal was almost proto-Gothic Metal. A more stable and durable genre was achieved by trading the synth sound for Classical music, leading to a similar genre known as Symphonic Metal with professional sopranos and tenors. The outcome is chaotic, romantic and mesmerizing Metal, but with a dark, despairing and brutal undertone which made it appropriate to be also called Gothic Metal. Gothic Metal is known for the use of female band leaders and vocalists which make the genre arguably the least macho of all Metal genres. With melancholic or poetic themes, usually embedded in an extremely escapist fantasy world of angels, elves and crystalline beauty, Gothic Metal could come straight out of The Lord of the Rings or a mythical role playing computer game. Metal has a number of very popular subgenres related to Gothic Metal, which also dwell on fantasy worlds like Folk Metal and Viking Metal.<br><br>

        <div class="row icon-list">
            <div class="col-sm-1 col-xs-1">
                <div class="buttons-metal">1</div>
            </div>

            <div class="col-sm-1 col-xs-1">
                <div class="buttons-metal">2</div>
            </div>
                  
            <div class="col-sm-1 col-xs-1">
                <div class="buttons-metal">3</div>
            </div>
                  
            <div class="col-sm-1 col-xs-1">
                <div class="buttons-metal">4</div>
            </div>
                
            <div class="col-sm-1 col-xs-1">
                <div class="buttons-metal">5</div>
            </div>

            <div class="col-sm-1 col-xs-1">
                <div class="buttons-metal">6</div>
            </div>

            <div class="col-sm-1 col-xs-1">
                <div class="buttons-metal">7</div>
            </div>

            <div class="col-sm-1 col-xs-1">
                <div class="buttons-metal">8</div>
            </div>

            <div class="col-sm-1 col-xs-1">
                <div class="buttons-metal">9</div>
            </div>

            <div class="visible-xs col-xs-1">
                <div class="buttons-metal-stop">&#9724;</div>
            </div>
        </div>

        <div class="example"><br>
            <p class="artisttrack">Artist: <span id="artist"><span></p><br>
            <p class="artisttrack">Track: <span id="track"></span></p> 
        </div>

        <div class="hidden-xs col-sm-1 stop">
            <div class="buttons-metal-stop">&#9724;</div>
        </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    
    <script>
        $(document).ready(function() {

            
            var tracks = [
                {
                    artist: "Tristania",
                    track: "Beyond The Veil",
                    path: "../../samples/metal/gothicmetal1.ogg"
                },
                {
                    artist: "Theatre Of Tragedy",
                    track: "Lorelei",
                    path: "../../samples/metal/gothicmetal2.ogg"
                },
                {
                    artist: "Nightwish",
                    track: "Wish I Had An Angel",
                    path: "../../samples/metal/gothicmetal3.ogg"
                },
                {
                    artist: "Paradise Lost",
                    track: "As I Die",
                    path: "../../samples/metal/gothicmetal4.ogg"
                },
                {
                    artist: "Type O Negative",
                    track: "My Girlfriend's Girlfriend",
                    path: "../../samples/metal/gothicmetal5.ogg"
                },
                {
                    artist: "Tiamat",
                    track: "Brighter Than The Sun",
                    path: "../../samples/metal/gothicmetal6.ogg"
                },
                {
                    artist: "Therion",
                    track: "The Rise Of Sodom And Gomorrah",
                    path: "../../samples/metal/gothicmetal7.ogg"
                },
                {
                    artist: "Within Temptation",
                    track: "Ice Queen",
                    path: "../../samples/metal/gothicmetal8.ogg"
                },
                {
                    artist: "The Sins Of Thy Beloved",
                    track: "Forever",
                    path: "../../samples/metal/gothicmetal9.ogg"
                }
            ]

            tracks.forEach(track => {
                const audio = new Audio()
                audio.addEventListener('canplaythrough', null, false)
                audio.src = track.path
            })

            var artistSpan = $(document).find('#artist')[0]

            var track = $(document).find('#track')[0]

            var audioInstanceArray = [];

            var buttons = [];

            var audioInstance;

            $(document).find('.buttons-metal').each(function(index, button) {

                buttons.push(button);
                
                $(this).click(function() {

                    removeAllButtonBorders()

                    $(this).toggleClass('clicked');
                
                    stopAllMusic()

                    audioInstance = new Audio(tracks[index].path);
                    audioInstanceArray.push(audioInstance);
                    audioInstance.play();

                    artistSpan.innerHTML = tracks[index].artist
                    track.innerHTML = tracks[index].track

                });
            });

            $('.buttons-metal-stop').on('click', function() {

                stopAllMusic()

                artistSpan.innerHTML = ''
                track.innerHTML = ''

                removeAllButtonBorders()

            });

            var removeAllButtonBorders = () => {
                buttons.forEach(
                    button => button.className = "buttons-metal"
                )
            }

            var stopAllMusic = () => {
                 audioInstanceArray.forEach(function(audioInstance, index) {
                        audioInstance.pause();
                        audioInstance.currentTime = 0;
                        audioInstanceArray.pop();
                    });
            }

        });

    </script>

</body>
</html>