<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="../../css/bootstrap.css">
        <link rel="stylesheet" href="../../css/style.css">
        <title>Krautrock</title>
    </head>

    <body id="krautrock">
        <div class="box rock">
            <h1>KRAUTROCK</h1>

            <p>Krautrock refers to the legions of German bands of the early 70s that expanded the sonic possibilities of art and Progressive Rock. Instead of following in the direction of their British and American counterparts, who were moving toward Jazz and Classical-based compositions and concept albums, the German bands became more mechanical and electronic. Working with early synthesisers and splicing together seemingly unconnected reels of tape, bands like Faust, Can, and Neu! created a droning, pulsating sound that owed more to the Avant-Garde than to Rock &amp; Roll. Although the bands didn't make much of an impact while they were active in the 70s, their music anticipated much Post-Punk of the early 80s, particularly Industrial Rock. One band, however, chose a far more radical path than others by abandoning all Rock influences. Kraftwerk made the first completely electronic music that had recognisable structure, melody and bass. With Kraftwerk as arguably the most revolutionary popular music artist of all time, Krautrock is one of the most influential genres, bridging the gap between Rock and Electronic.</p>

            <div class="row icon-list">
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-rock">1</div></div>
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-rock">2</div></div>
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-rock">3</div></div>
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-rock">4</div></div>
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-rock">5</div></div>
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-rock">6</div></div>
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-rock">7</div></div>
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-rock">8</div></div>
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-rock">9</div></div>
                <div class="d-lg-none col-lg-1 col-xs-1"><div class="buttons buttons-rock-stop">&FilledSmallSquare;</div></div>
            </div>

            <p class="artisttrack">Artist: <span id="artist"><span></p><br>
            <p class="artisttrack">Track: <span id="track"></span></p>
            <div class="d-none d-lg-block col-md-1 stop"><div class="buttons buttons-rock-stop">&FilledSmallSquare;</div></div>
        </div>

        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>

        <script>
            $(document).ready(function() {
                var tracks = [
                    {
                        artist: "Kraftwerk",
                        track: "Trans-Europe Express",
                        path: "../../samples/rock/krautrock1.ogg"
                    },
                    {
                        artist: "Neu!",
                        track: "Hallogallo",
                        path: "../../samples/rock/krautrock2.ogg"
                    },
                    {
                        artist: "Can",
                        track: "Vitamin C",
                        path: "../../samples/rock/krautrock3.ogg"
                    },
                    {
                        artist: "Faust",
                        track: "So Far",
                        path: "../../samples/rock/krautrock4.ogg"
                    },
                    {
                        artist: "Amon Düül II",
                        track: "Surrounded By The Stars",
                        path: "../../samples/rock/krautrock5.ogg"
                    },
                    {
                        artist: "Ash Ra Tempel",
                        track: "Amboss",
                        path: "../../samples/rock/krautrock6.ogg"
                    },
                    {
                        artist: "Guru Guru",
                        track: "Der Elektrolurch",
                        path: "../../samples/rock/krautrock7.ogg"
                    },
                    {
                        artist: "Cosmic Jokers",
                        track: "Galactic Joke",
                        path: "../../samples/rock/krautrock8.ogg"
                    },
                    {
                        artist: "Sperrmüll",
                        track: "No Freak Out",
                        path: "../../samples/rock/krautrock9.ogg"
                    }
                ]

                tracks.forEach(track => {
                    const audio = new Audio()
                    audio.addEventListener('canplaythrough', null, false)
                    audio.src = track.path
                })

                var artistSpan = $(document).find('#artist')[0]
                var track = $(document).find('#track')[0]
                var audioInstanceArray = [];
                var buttons = [];
                var audioInstance;

                $(document).find('.buttons-rock').each(function(index, button) {
                    buttons.push(button);
                    $(this).click(function() {
                        removeAllButtonBorders()
                        $(this).toggleClass('clicked');
                        stopAllMusic()
                        audioInstance = new Audio(tracks[index].path);
                        audioInstanceArray.push(audioInstance);
                        audioInstance.play();
                        artistSpan.innerHTML = tracks[index].artist
                        track.innerHTML = tracks[index].track
                    });
                });

                $('.buttons-rock-stop').on('click', function() {
                    stopAllMusic()
                    artistSpan.innerHTML = ''
                    track.innerHTML = ''
                    removeAllButtonBorders()
                });

                var removeAllButtonBorders = () => {
                    buttons.forEach(
                        button => button.className = "buttons buttons-rock"
                    )
                }

                var stopAllMusic = () => {
                    audioInstanceArray.forEach(function(audioInstance, index) {
                        audioInstance.pause();
                        audioInstance.currentTime = 0;
                        audioInstanceArray.pop();
                    });
                }
            });
        </script>
    </body>
</html>
