<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="../../../css/bootstrap.css">
        <link rel="stylesheet" href="../../../css/style.css">
        <title>Metalcore</title>
    </head>

    <body id="metalcore">
        <div class="box metal">
            <h1>METALCORE</h1><div class="year year-metal">1995</div>

            <p>In a desperate attempt to prevent Nu Metal from remaining the last chapter in the history of Metal, the ambiguous term Metalcore (aka the New Wave of American Heavy Metal) was conceived. This was far from necessary, as Metal is perhaps the only supergenre where all different styles are still being practised and performed intensively. At first, this wave of American bands seemed only unified in their stance against Nu Metal, but gradually a specific, well-defined genre unfolded, named Metalcore. Instead of mutually aggravating each other towards the extreme like Grindcore, Metalcore is a balanced mix of Hardcore and Death Metal elements, which undoubtedly has led to longer, more complex songs. The song structure and mentality is still Hardcore, but with a slower drum beat and metallic single note guitars. Metalcore is also the least emotional type of Hardcore. Metalcore is a forced marriage between Hardcore Punk and Metal to save both genres their legacies, despite mutual differences. Nevertheless, Metalcore's numerous offspring subgenres prove the healthiness of this marriage in one way or another.</p>

            <div class="row">
                <div class="col-1"><div class="buttons buttons-metal">1</div></div>
                <div class="col-1"><div class="buttons buttons-metal">2</div></div>
                <div class="col-1"><div class="buttons buttons-metal">3</div></div>
                <div class="col-1"><div class="buttons buttons-metal">4</div></div>
                <div class="col-1"><div class="buttons buttons-metal">5</div></div>
                <div class="col-1"><div class="buttons buttons-metal">6</div></div>
                <div class="col-1"><div class="buttons buttons-metal">7</div></div>
                <div class="col-1"><div class="buttons buttons-metal">8</div></div>
                <div class="col-1"><div class="buttons buttons-metal">9</div></div>
            </div>

            <p class="artisttrack">Artist: <span id="artist"><span></p><br>
            <p class="artisttrack">Track: <span id="track"></span></p>
            <div class="col-1 stop"><div class="buttons buttons-metal-stop">&FilledSmallSquare;</div></div>
        </div>

        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>

        <script>
            $(document).ready(function() {
                var tracks = [
                    {
                        artist: "Killswitch Engage",
                        track: "My Curse",
                        path: "../../../samples/metal/metalcore1.ogg"
                    },
                    {
                        artist: "Bullet For My Valentine",
                        track: "Your Betrayal",
                        path: "../../../samples/metal/metalcore2.ogg"
                    },
                    {
                        artist: "Shadows Fall",
                        track: "In Effigy",
                        path: "../../../samples/metal/metalcore3.ogg"
                    },
                    {
                        artist: "Chimaira",
                        track: "Resurrection",
                        path: "../../../samples/metal/metalcore4.ogg"
                    },
                    {
                        artist: "Lamb Of God",
                        track: "Laid To Rest",
                        path: "../../../samples/metal/metalcore5.ogg"
                    },
                    {
                        artist: "Hatebreed",
                        track: "Destroy Everything",
                        path: "../../../samples/metal/metalcore6.ogg"
                    },
                    {
                        artist: "Avenged Sevenfold",
                        track: "Nightmare",
                        path: "../../../samples/metal/metalcore7.ogg"
                    },
                    {
                        artist: "Unearth",
                        track: "My Will Be Done",
                        path: "../../../samples/metal/metalcore8.ogg"
                    },
                    {
                        artist: "All Out War",
                        track: "Soaked In Torment",
                        path: "../../../samples/metal/metalcore9.ogg"
                    }
                ]

                tracks.forEach(track => {
                    const audio = new Audio()
                    audio.addEventListener('canplaythrough', null, false)
                    audio.src = track.path
                })

                var artistSpan = $(document).find('#artist')[0]
                var track = $(document).find('#track')[0]
                var audioInstanceArray = [];
                var buttons = [];
                var audioInstance;

                $(document).find('.buttons-metal').each(function(index, button) {
                    buttons.push(button);
                    $(this).click(function() {
                        removeAllButtonBorders()
                        $(this).toggleClass('clicked');
                        stopAllMusic()
                        audioInstance = new Audio(tracks[index].path);
                        audioInstanceArray.push(audioInstance);
                        audioInstance.play();
                        artistSpan.innerHTML = tracks[index].artist
                        track.innerHTML = tracks[index].track
                    });
                });

                $('.buttons-metal-stop').on('click', function() {
                    stopAllMusic()
                    artistSpan.innerHTML = ''
                    track.innerHTML = ''
                    removeAllButtonBorders()
                });

                var removeAllButtonBorders = () => {
                    buttons.forEach(
                        button => button.className = "buttons buttons-metal"
                    )
                }

                var stopAllMusic = () => {
                    audioInstanceArray.forEach(function(audioInstance, index) {
                        audioInstance.pause();
                        audioInstance.currentTime = 0;
                        audioInstanceArray.pop();
                    });
                }
            });
        </script>
    </body>
</html>
