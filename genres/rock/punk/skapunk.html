<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,900">
        <link rel="stylesheet" href="../../../css/style.css">
        <title>Ska Punk</title>
    </head>

    <body class="genre" id="skapunk">
        <div class="box punk">
            <h1>SKA PUNK</h1>

            <p>During the years of Punk rebellion in the UK, an unexpected ally appeared as Rastafarians started protesting alongside Punks, united by their fight against reform and oppression. Punk and Reggae never merged, though Reggae's influence is certainly noticeable in many New Wave records. Reactionary Street Punk known as Oi!-Punk, was the result of UK skinheads looking for new music to dance to and they found it in Ska (not Reggae). Though Oi! is sometimes associated with neofascist, racist and nihilistic subcultures, most of the Oi! skinheads picked up the appearance as a satirical protest against the new right-wing UK National Front Party. The famous British label 2-Tone Records released a new series of British Ska artists, which lead to a large revival and the discovery of Ska in the US and the UK, nearly two decades after the genre was invented. Inspired by Oi! Punk, this second wave of Ska or Ska Revival got mixed up with Punk and by the end of the 80s the formation of Ska Punk was complete. The second wave of Ska changed Punk songs into uptempo, optimistic tracks with brass instruments, though still politically aware.</p>

            <div class="row icon-list">
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-punk">1</div></div>
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-punk">2</div></div>
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-punk">3</div></div>
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-punk">4</div></div>
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-punk">5</div></div>
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-punk">6</div></div>
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-punk">7</div></div>
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-punk">8</div></div>
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-punk">9</div></div>
                <div class="d-block d-lg-none col-lg-1 col-xs-1"><div class="buttons buttons-punk-stop">&FilledSmallSquare;</div></div>
            </div>

            <div class="example">
                <p class="artisttrack">Artist: <span id="artist"><span></p><br>
                <p class="artisttrack">Track: <span id="track"></span></p>
            </div>

            <div class="d-none d-lg-block col-md-1 stop"><div class="buttons buttons-punk-stop">&FilledSmallSquare;</div></div>
        </div>

        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

        <script>
            $(document).ready(function() {
                var tracks = [
                    {
                        artist: "The Specials",
                        track: "A Message To You Rudy",
                        path: "../../../samples/rock/punk/skapunk1.ogg"
                    },
                    {
                        artist: "The Beat",
                        track: "Mirror In The Bathroom",
                        path: "../../../samples/rock/punk/skapunk2.ogg"
                    },
                    {
                        artist: "Madness",
                        track: "House Of Fun",
                        path: "../../../samples/rock/punk/skapunk3.ogg"
                    },
                    {
                        artist: "Fun Boy Three",
                        track: "The Lunatics (Have Taken Over The Asylum)",
                        path: "../../../samples/rock/punk/skapunk4.ogg"
                    },
                    {
                        artist: "The Selecter",
                        track: "On My Radio",
                        path: "../../../samples/rock/punk/skapunk5.ogg"
                    },
                    {
                        artist: "Bad Manners",
                        track: "Lip Up Fatty",
                        path: "../../../samples/rock/punk/skapunk6.ogg"
                    },
                    {
                        artist: "The Mighty Mighty Bosstones",
                        track: "The Impression That I Get",
                        path: "../../../samples/rock/punk/skapunk7.ogg"
                    },
                    {
                        artist: "Operation Ivy",
                        track: "Sound System",
                        path: "../../../samples/rock/punk/skapunk8.ogg"
                    },
                    {
                        artist: "Rancid",
                        track: "Time Bomb",
                        path: "../../../samples/rock/punk/skapunk9.ogg"
                    }
                ]

                tracks.forEach(track => {
                    const audio = new Audio()
                    audio.addEventListener('canplaythrough', null, false)
                    audio.src = track.path
                })

                var artistSpan = $(document).find('#artist')[0]
                var track = $(document).find('#track')[0]
                var audioInstanceArray = [];
                var buttons = [];
                var audioInstance;

                $(document).find('.buttons-punk').each(function(index, button) {
                    buttons.push(button);
                    $(this).click(function() {
                        removeAllButtonBorders()
                        $(this).toggleClass('clicked');
                        stopAllMusic()
                        audioInstance = new Audio(tracks[index].path);
                        audioInstanceArray.push(audioInstance);
                        audioInstance.play();
                        artistSpan.innerHTML = tracks[index].artist
                        track.innerHTML = tracks[index].track
                    });
                });

                $('.buttons-punk-stop').on('click', function() {
                    stopAllMusic()
                    artistSpan.innerHTML = ''
                    track.innerHTML = ''
                    removeAllButtonBorders()
                });

                var removeAllButtonBorders = () => {
                    buttons.forEach(
                        button => button.className = "buttons buttons-punk"
                    )
                }

                var stopAllMusic = () => {
                    audioInstanceArray.forEach(function(audioInstance, index) {
                        audioInstance.pause();
                        audioInstance.currentTime = 0;
                        audioInstanceArray.pop();
                    });
                }
            });
        </script>
    </body>
</html>
