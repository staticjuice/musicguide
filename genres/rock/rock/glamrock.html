<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="../../../css/bootstrap.css">
        <link rel="stylesheet" href="../../../css/style.css">
        <title>Glam Rock</title>
    </head>

    <body id="glamrock">
        <div class="box rock"><div class="year year-rock">1970</div>
            <h1>GLAM ROCK</h1>

            <p>The implosion of the flower power age led to a shift of focus towards individualism and with some artists to a cult of personality. One important contributor to this change is the introduction of popular music onto television. At first with broadcasted performances, music programmes and in the 80s even with specialised music channels and video clips. This was strongly felt in the world of Rock where Hard Rock became less about auditory and more about the visual. Certain Rock artists grasped the opportunity of TV to stand out and get noticed. Either by shocking audiences with sexual or provocative acts or by conceiving eccentric alter egos through makeup and fashion. Glam Rock's style could range from Singer-Songwriter to Progressive Rock or even Hard Rock, but often with piano melodies. Glam Rock is about fame. Androgynous singers and electronic influences frightened traditional Rock enthusiasts who started forming a large countermovement in "Roots Rock". Glam Rock overlaps with its successor, Proto-Punk, which would transfer the glam universe of excess and eccentricity to Punk Rock.</p>

            <div class="row icon-list">
                <div class="col-1"><div class="buttons buttons-rock">1</div></div>
                <div class="col-1"><div class="buttons buttons-rock">2</div></div>
                <div class="col-1"><div class="buttons buttons-rock">3</div></div>
                <div class="col-1"><div class="buttons buttons-rock">4</div></div>
                <div class="col-1"><div class="buttons buttons-rock">5</div></div>
                <div class="col-1"><div class="buttons buttons-rock">6</div></div>
                <div class="col-1"><div class="buttons buttons-rock">7</div></div>
                <div class="col-1"><div class="buttons buttons-rock">8</div></div>
                <div class="col-1"><div class="buttons buttons-rock">9</div></div>
            </div>

            <p class="artisttrack">Artist: <span id="artist"><span></p><br>
            <p class="artisttrack">Track: <span id="track"></span></p>
            <div class="col-1 stop"><div class="buttons buttons-rock-stop">&FilledSmallSquare;</div></div>
        </div>

        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>

        <script>
            $(document).ready(function() {
                var tracks = [
                    {
                        artist: "David Bowie",
                        track: "Starman",
                        path: "../../../samples/rock/glamrock1.ogg"
                    },
                    {
                        artist: "Queen",
                        track: "Don't Stop Me Now",
                        path: "../../../samples/rock/glamrock2.ogg"
                    },
                    {
                        artist: "Roxy Music",
                        track: "Love Is The Drug",
                        path: "../../../samples/rock/glamrock3.ogg"
                    },
                    {
                        artist: "Lou Reed",
                        track: "Satellite Of Love",
                        path: "../../../samples/rock/glamrock4.ogg"
                    },
                    {
                        artist: "T. Rex",
                        track: "Children Of The Revolution",
                        path: "../../../samples/rock/glamrock5.ogg"
                    },
                    {
                        artist: "Suzi Quatro",
                        track: "Can The Can",
                        path: "../../../samples/rock/glamrock6.ogg"
                    },
                    {
                        artist: "Slade",
                        track: "Far Far Away",
                        path: "../../../samples/rock/glamrock7.ogg"
                    },
                    {
                        artist: "Sweet",
                        track: "The Ballroom Blitz",
                        path: "../../../samples/rock/glamrock8.ogg"
                    },
                    {
                        artist: "Garry Glitter",
                        track: "Rock And Roll (Part 1)",
                        path: "../../../samples/rock/glamrock9.ogg"
                    }
                ]

                tracks.forEach(track => {
                    const audio = new Audio()
                    audio.addEventListener('canplaythrough', null, false)
                    audio.src = track.path
                })

                var artistSpan = $(document).find('#artist')[0]
                var track = $(document).find('#track')[0]
                var audioInstanceArray = [];
                var buttons = [];
                var audioInstance;

                $(document).find('.buttons-rock').each(function(index, button) {
                    buttons.push(button);
                    $(this).click(function() {
                        removeAllButtonBorders()
                        $(this).toggleClass('clicked');
                        stopAllMusic()
                        audioInstance = new Audio(tracks[index].path);
                        audioInstanceArray.push(audioInstance);
                        audioInstance.play();
                        artistSpan.innerHTML = tracks[index].artist
                        track.innerHTML = tracks[index].track
                    });
                });

                $('.buttons-rock-stop').on('click', function() {
                    stopAllMusic()
                    artistSpan.innerHTML = ''
                    track.innerHTML = ''
                    removeAllButtonBorders()
                });

                var removeAllButtonBorders = () => {
                    buttons.forEach(
                        button => button.className = "buttons buttons-rock"
                    )
                }

                var stopAllMusic = () => {
                    audioInstanceArray.forEach(function(audioInstance, index) {
                        audioInstance.pause();
                        audioInstance.currentTime = 0;
                        audioInstanceArray.pop();
                    });
                }
            });
        </script>
    </body>
</html>
