<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="../../css/bootstrap.css">
        <link rel="stylesheet" href="../../css/style.css">
        <title>Nashville Sound</title>
    </head>

    <body id="nashvillesound">
        <div class="box country"><div class="year year-country">1956</div>
            <h1>NASHVILLE SOUND</h1>

            <p>Country expands drastically after World War II, thanks to a heightened sense of nationalism, a larger export market (baby boomers), an exponential increase in Country radio stations, and a bigger target audience due to the appeal of electric instruments. The Rock &amp; Roll revolution, however, threatened Country's prosperous expansion. Country revolted with a commercialised version of Honky-Tonk, a genre that was content-wise quite the opposite of Rock &amp; Roll. Honky-Tonk had to lose its hardcore edge to become more popular. This resulted in a smooth, softer Pop-like Country, with more emphasis on strings and textured instruments. Its name came from the town where most of its slick producers intended to regain the influence back that Rock &amp; Roll had stolen from them &ndash; Nashville, Tennessee. It was also the town where a lot of huge barn dances with Nashville country were being held, such as the legendary Grand Ole Opry. Eventually, the Nashville Sound became even more polished in the form of mainstream Countrypolitan, though these genres may be regarded as synonymous.</p>

            <div class="row icon-list">
                <div class="col-1"><div class="buttons buttons-country">1</div></div>
                <div class="col-1"><div class="buttons buttons-country">2</div></div>
                <div class="col-1"><div class="buttons buttons-country">3</div></div>
                <div class="col-1"><div class="buttons buttons-country">4</div></div>
                <div class="col-1"><div class="buttons buttons-country">5</div></div>
                <div class="col-1"><div class="buttons buttons-country">6</div></div>
                <div class="col-1"><div class="buttons buttons-country">7</div></div>
                <div class="col-1"><div class="buttons buttons-country">8</div></div>
                <div class="col-1"><div class="buttons buttons-country">9</div></div>
            </div>

            <p class="artisttrack">Artist: <span id="artist"><span></p><br>
            <p class="artisttrack">Track: <span id="track"></span></p>
            <div class="col-1 stop"><div class="buttons buttons-country-stop">&FilledSmallSquare;</div></div>
        </div>

        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>

        <script>
            $(document).ready(function() {
                var tracks = [
                    {
                        artist: "Tammy Wynette",
                        track: "Stand By Your Man",
                        path: "../../samples/country/nashvillesound1.ogg"
                    },
                    {
                        artist: "Charlie Rich",
                        track: "Behind Closed Doors",
                        path: "../../samples/country/nashvillesound2.ogg"
                    },
                    {
                        artist: "Patsy Cline",
                        track: "Crazy",
                        path: "../../samples/country/nashvillesound3.ogg"
                    },
                    {
                        artist: "Skeeter Davis",
                        track: "The End Of The World",
                        path: "../../samples/country/nashvillesound4.ogg"
                    },
                    {
                        artist: "Jim Reeves",
                        track: "I Love You Because",
                        path: "../../samples/country/nashvillesound5.ogg"
                    },
                    {
                        artist: "Connie Smith",
                        track: "Once A Day",
                        path: "../../samples/country/nashvillesound6.ogg"
                    },
                    {
                        artist: "David Houston",
                        track: "Almost Persuaded",
                        path: "../../samples/country/nashvillesound7.ogg"
                    },
                    {
                        artist: "Stonewall Jackson",
                        track: "A Wound Time Can't Erase",
                        path: "../../samples/country/nashvillesound8.ogg"
                    },
                    {
                        artist: "Glen Campbell",
                        track: "Rhinestone Cowboy",
                        path: "../../samples/country/nashvillesound9.ogg"
                    }
                ]

                tracks.forEach(track => {
                    const audio = new Audio()
                    audio.addEventListener('canplaythrough', null, false)
                    audio.src = track.path
                })

                var artistSpan = $(document).find('#artist')[0]
                var track = $(document).find('#track')[0]
                var audioInstanceArray = [];
                var buttons = [];
                var audioInstance;

                $(document).find('.buttons-country').each(function(index, button) {
                    buttons.push(button);
                    $(this).click(function() {
                        removeAllButtonBorders()
                        $(this).toggleClass('clicked');
                        stopAllMusic()
                        audioInstance = new Audio(tracks[index].path);
                        audioInstanceArray.push(audioInstance);
                        audioInstance.play();
                        artistSpan.innerHTML = tracks[index].artist
                        track.innerHTML = tracks[index].track
                    });
                });

                $('.buttons-country-stop').on('click', function() {
                    stopAllMusic()
                    artistSpan.innerHTML = ''
                    track.innerHTML = ''
                    removeAllButtonBorders()
                });

                var removeAllButtonBorders = () => {
                    buttons.forEach(
                        button => button.className = "buttons buttons-country"
                    )
                }

                var stopAllMusic = () => {
                    audioInstanceArray.forEach(function(audioInstance, index) {
                        audioInstance.pause();
                        audioInstance.currentTime = 0;
                        audioInstanceArray.pop();
                    });
                }
            });
        </script>
    </body>
</html>
