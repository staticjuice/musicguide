<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,900">
        <link rel="stylesheet" href="../../css/style.css">
        <title>Nashville Sound</title>
    </head>

    <body class="genre" id="nashvillesound">
        <div class="box country">
            <h1>NASHVILLE SOUND</h1>

            <p>Country expands drastically after World War II, thanks to a heightened sense of nationalism, a larger export market (baby boomers), an exponential increase in Country radio stations, and a bigger target audience due to the appeal of electric instruments. The Rock &amp; Roll revolution however, threatened Country's prosperous expansion. Country revolted with a commercialized version of Honky Tonk, a genre that was content-wise quite the opposite of Rock &amp; Roll. Honky Tonk had to lose its hardcore edge in order to become more popular. This resulted in a smooth, softer Pop-like Country, with more emphasis on strings and textured instruments. Its name came from the town where most of its slick producers intended to regain the influence back that Rock &amp; Roll had stolen from them &ndash; Nashville, Tennessee. It was also the town where a lot of huge barn dances with Nashville country were being held, such as the legendary Grand Ole Opry. Eventually the Nashville Sound became even more polished in the form of mainstream Countrypolitan, though these genres may be regarded as synonymous.</p>

            <div class="row icon-list">
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-country">1</div></div>
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-country">2</div></div>
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-country">3</div></div>
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-country">4</div></div>
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-country">5</div></div>
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-country">6</div></div>
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-country">7</div></div>
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-country">8</div></div>
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-country">9</div></div>
                <div class="d-block d-md-none col-md-1 col-xs-1"><div class="buttons buttons-country-stop">&FilledSmallSquare;</div></div>
            </div>

            <div class="example">
                <p class="artisttrack">Artist: <span id="artist"><span></p><br>
                <p class="artisttrack">Track: <span id="track"></span></p>
            </div>

            <div class="d-none d-md-block col-md-1 stop"><div class="buttons buttons-country-stop">&FilledSmallSquare;</div></div>
        </div>

        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

        <script>
            $(document).ready(function() {
                var tracks = [
                    {
                        artist: "Tammy Wynette",
                        track: "Stand By Your Man",
                        path: "../../samples/country/nashvillesound1.ogg"
                    },
                    {
                        artist: "Charlie Rich",
                        track: "Behind Closed Doors",
                        path: "../../samples/country/nashvillesound2.ogg"
                    },
                    {
                        artist: "Patsy Cline",
                        track: "Crazy",
                        path: "../../samples/country/nashvillesound3.ogg"
                    },
                    {
                        artist: "Skeeter Davis",
                        track: "The End Of The World",
                        path: "../../samples/country/nashvillesound4.ogg"
                    },
                    {
                        artist: "Jim Reeves",
                        track: "I Love You Because",
                        path: "../../samples/country/nashvillesound5.ogg"
                    },
                    {
                        artist: "Connie Smith",
                        track: "Once A Day",
                        path: "../../samples/country/nashvillesound6.ogg"
                    },
                    {
                        artist: "David Houston",
                        track: "Almost Persuaded",
                        path: "../../samples/country/nashvillesound7.ogg"
                    },
                    {
                        artist: "Stonewall Jackson",
                        track: "A Wound Time Can't Erase",
                        path: "../../samples/country/nashvillesound8.ogg"
                    },
                    {
                        artist: "Glen Campbell",
                        track: "Rhinestone Cowboy",
                        path: "../../samples/country/nashvillesound9.ogg"
                    }
                ]

                tracks.forEach(track => {
                    const audio = new Audio()
                    audio.addEventListener('canplaythrough', null, false)
                    audio.src = track.path
                })

                var artistSpan = $(document).find('#artist')[0]
                var track = $(document).find('#track')[0]
                var audioInstanceArray = [];
                var buttons = [];
                var audioInstance;

                $(document).find('.buttons-country').each(function(index, button) {
                    buttons.push(button);
                    $(this).click(function() {
                        removeAllButtonBorders()
                        $(this).toggleClass('clicked');
                        stopAllMusic()
                        audioInstance = new Audio(tracks[index].path);
                        audioInstanceArray.push(audioInstance);
                        audioInstance.play();
                        artistSpan.innerHTML = tracks[index].artist
                        track.innerHTML = tracks[index].track
                    });
                });

                $('.buttons-country-stop').on('click', function() {
                    stopAllMusic()
                    artistSpan.innerHTML = ''
                    track.innerHTML = ''
                    removeAllButtonBorders()
                });

                var removeAllButtonBorders = () => {
                    buttons.forEach(
                        button => button.className = "buttons buttons-country"
                    )
                }

                var stopAllMusic = () => {
                    audioInstanceArray.forEach(function(audioInstance, index) {
                        audioInstance.pause();
                        audioInstance.currentTime = 0;
                        audioInstanceArray.pop();
                    });
                }
            });
        </script>
    </body>
</html>
