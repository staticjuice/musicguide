<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,900">
        <link rel="stylesheet" href="../../css/style.css">
        <title>Country Pop</title>
    </head>

    <body class="genre" id="countrypop">
        <div class="box country">
            <h1>COUNTRY POP</h1>

            <p>Prior to the rise of Rock &amp; Roll, Country music was rarely heard outside of its intended market, effectively isolating it from any concerns about wide accessibility. When Rockabilly took off, Country musicians were forced to consider whether their true affinities lay with traditional Country or with this popular new style, which allowed artists to reach crossover audiences for the first time. This flirtation with the mainstream marked the beginnings of Country Pop, which grew out of the realization that Country-influenced music could be hybridized and smoothed out for mass consumption. RCA Records producer Chet Atkins was the most important figure in the initial cross-breeding of Country and Pop, creating a sound that was dubbed "Countrypolitan" for its blend of rural sensibility and urban sophistication. Because the melodies and song structures of Country music were usually very simple and catchy, they worked well when placed in a Pop-oriented format &ndash; Atkins' productions often placed the songs in orchestral arrangements heavy on the strings, which sometimes blended with Country instrumentation and sometimes stood alone.</p>

            <div class="row icon-list">
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-country">1</div></div>
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-country">2</div></div>
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-country">3</div></div>
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-country">4</div></div>
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-country">5</div></div>
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-country">6</div></div>
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-country">7</div></div>
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-country">8</div></div>
                <div class="col-md-1 col-xs-1"><div class="buttons buttons-country">9</div></div>
                <div class="d-block d-md-none col-md-1 col-xs-1"><div class="buttons buttons-country-stop">&#9724;</div></div>
            </div>

            <div class="example">
                <p class="artisttrack">Artist: <span id="artist"><span></p><br>
                <p class="artisttrack">Track: <span id="track"></span></p>
            </div>

            <div class="d-none d-md-block col-md-1 stop"><div class="buttons buttons-country-stop">&#9724;</div></div>
        </div>

        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

        <script>
            $(document).ready(function() {
                var tracks = [
                    {
                        artist: "Dolly Parton",
                        track: "Jolene",
                        path: "../../samples/country/countrypop1.ogg"
                    },
                    {
                        artist: "The Carpenters",
                        track: "Top Of The World",
                        path: "../../samples/country/countrypop2.ogg"
                    },
                    {
                        artist: "The Flying Burrito Brothers",
                        track: "Wild Horses",
                        path: "../../samples/country/countrypop3.ogg"
                    },
                    {
                        artist: "Shania Twain",
                        track: "Don't Be Stupid (You Know I Love You)",
                        path: "../../samples/country/countrypop4.ogg"
                    },
                    {
                        artist: "Taylor Swift",
                        track: "You Belong With Me",
                        path: "../../samples/country/countrypop5.ogg"
                    },
                    {
                        artist: "Jake Owen",
                        track: "Days Of Gold",
                        path: "../../samples/country/countrypop6.ogg"
                    },
                    {
                        artist: "Blake Shelton",
                        track: "A Guy With A Girl",
                        path: "../../samples/country/countrypop7.ogg"
                    },
                    {
                        artist: "Luke Bryan",
                        track: "Rain Is A Good Thing",
                        path: "../../samples/country/countrypop8.ogg"
                    },
                    {
                        artist: "Florida Georgia Line",
                        track: "Cruise",
                        path: "../../samples/country/countrypop9.ogg"
                    }
                ]

                tracks.forEach(track => {
                    const audio = new Audio()
                    audio.addEventListener('canplaythrough', null, false)
                    audio.src = track.path
                })

                var artistSpan = $(document).find('#artist')[0]
                var track = $(document).find('#track')[0]
                var audioInstanceArray = [];
                var buttons = [];
                var audioInstance;

                $(document).find('.buttons-country').each(function(index, button) {
                    buttons.push(button);
                    $(this).click(function() {
                        removeAllButtonBorders()
                        $(this).toggleClass('clicked');
                        stopAllMusic()
                        audioInstance = new Audio(tracks[index].path);
                        audioInstanceArray.push(audioInstance);
                        audioInstance.play();
                        artistSpan.innerHTML = tracks[index].artist
                        track.innerHTML = tracks[index].track
                    });
                });

                $('.buttons-country-stop').on('click', function() {
                    stopAllMusic()
                    artistSpan.innerHTML = ''
                    track.innerHTML = ''
                    removeAllButtonBorders()
                });

                var removeAllButtonBorders = () => {
                    buttons.forEach(
                        button => button.className = "buttons buttons-country"
                    )
                }

                var stopAllMusic = () => {
                    audioInstanceArray.forEach(function(audioInstance, index) {
                        audioInstance.pause();
                        audioInstance.currentTime = 0;
                        audioInstanceArray.pop();
                    });
                }
            });
        </script>
    </body>
</html>
