<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="../../css/bootstrap.css">
        <link rel="stylesheet" href="../../css/style.css">
        <title>Western Swing</title>
    </head>

    <body id="westernswing">
        <div class="box country">
            <h1>WESTERN SWING</h1><div class="year year-country">1932</div>

            <p>The big craze that was Swing swiftly got a hold on Country because entertaining music for large venues where people could dance was a concept that could just as easily be done with Country music. Except this wasn't done in fancy ballrooms or concert halls, but good old-fashioned barns. Especially in Texas and Oklahoma, the genre proved very successful. Bob Wills and Milton Brown popularised the genre in the 30s, and Wills became known as the father of the genre, since he remained popular for several decades, during which he had a remarkable string of hit singles. When the new technology of amplified guitars was fitted into the Country instrument ensemble, the eclectic genre Western Swing was born. It borrowed influences from just about any other popular music genre that was already invented (which was a rather scarce collection at the time). Swing rhythms, Jazz solos and many different instruments merged into an unrestricted and original sound. It was also one of the very first music genres to be broadcasted to a large audience by radio. But as radio made Western Swing great, the invention of television killed it.</p>

            <div class="row">
                <div class="col-1"><div class="buttons buttons-country">1</div></div>
                <div class="col-1"><div class="buttons buttons-country">2</div></div>
                <div class="col-1"><div class="buttons buttons-country">3</div></div>
                <div class="col-1"><div class="buttons buttons-country">4</div></div>
                <div class="col-1"><div class="buttons buttons-country">5</div></div>
                <div class="col-1"><div class="buttons buttons-country">6</div></div>
                <div class="col-1"><div class="buttons buttons-country">7</div></div>
                <div class="col-1"><div class="buttons buttons-country">8</div></div>
                <div class="col-1"><div class="buttons buttons-country">9</div></div>
            </div>

            <p class="artisttrack">Artist: <span id="artist"><span></p><br>
            <p class="artisttrack">Track: <span id="track"></span></p>
            <div class="col-1 stop"><div class="buttons buttons-country-stop">&FilledSmallSquare;</div></div>
        </div>

        <script src="https://code.jquery.com/jquery-3.6.0.slim.min.js"></script>

        <script>
            $(document).ready(function() {
                var tracks = [
                    {
                        artist: "Light Crust Doughboys",
                        track: "Tom Cat Rag",
                        path: "../../samples/country/westernswing1.ogg"
                    },
                    {
                        artist: "Bob Wills & His Texas Playboys",
                        track: "San Antonio Rose",
                        path: "../../samples/country/westernswing2.ogg"
                    },
                    {
                        artist: "Prairie Ramblers",
                        track: "Deep Elem Blues",
                        path: "../../samples/country/westernswing3.ogg"
                    },
                    {
                        artist: "Spade Cooley",
                        track: "Miss Molly",
                        path: "../../samples/country/westernswing4.ogg"
                    },
                    {
                        artist: "Milton Brown",
                        track: "Garbage Man Blues",
                        path: "../../samples/country/westernswing5.ogg"
                    },
                    {
                        artist: "Tex Williams",
                        track: "Fiddle Time",
                        path: "../../samples/country/westernswing6.ogg"
                    },
                    {
                        artist: "Hank Penny",
                        track: "Steel Guitar Stomp",
                        path: "../../samples/country/westernswing7.ogg"
                    },
                    {
                        artist: "Bill Boyd's Cowboy Ramblers",
                        track: "Under The Double Eagle",
                        path: "../../samples/country/westernswing8.ogg"
                    },
                    {
                        artist: "The Tune Wranglers",
                        track: "Ragtime Cowboy Joe",
                        path: "../../samples/country/westernswing9.ogg"
                    }
                ]

                tracks.forEach(track => {
                    const audio = new Audio()
                    audio.addEventListener('canplaythrough', null, false)
                    audio.src = track.path
                })

                var artistSpan = $(document).find('#artist')[0]
                var track = $(document).find('#track')[0]
                var audioInstanceArray = [];
                var buttons = [];
                var audioInstance;

                $(document).find('.buttons-country').each(function(index, button) {
                    buttons.push(button);
                    $(this).click(function() {
                        removeAllButtonBorders()
                        $(this).toggleClass('clicked');
                        stopAllMusic()
                        audioInstance = new Audio(tracks[index].path);
                        audioInstanceArray.push(audioInstance);
                        audioInstance.play();
                        artistSpan.innerHTML = tracks[index].artist
                        track.innerHTML = tracks[index].track
                    });
                });

                $('.buttons-country-stop').on('click', function() {
                    stopAllMusic()
                    artistSpan.innerHTML = ''
                    track.innerHTML = ''
                    removeAllButtonBorders()
                });

                var removeAllButtonBorders = () => {
                    buttons.forEach(
                        button => button.className = "buttons buttons-country"
                    )
                }

                var stopAllMusic = () => {
                    audioInstanceArray.forEach(function(audioInstance, index) {
                        audioInstance.pause();
                        audioInstance.currentTime = 0;
                        audioInstanceArray.pop();
                    });
                }
            });
        </script>
    </body>
</html>
