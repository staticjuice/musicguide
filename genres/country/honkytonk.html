<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="../../css/bootstrap.css">
        <link rel="stylesheet" href="../../css/style.css">
        <title>Honky-Tonk</title>
    </head>

    <body id="honkytonk">
        <div class="box country">
            <h1>HONKY-TONK</h1><div class="year year-country">1941</div>

            <p>Country before the 40s had a bit of a multiple personality disorder. While one part of it evolved as a crazy, fun barn dance music, the other part went the opposite way. It evolved as an introvert, back-to-the-roots music that wasn't happy at all and often involved tragic ballads, known as Honky-Tonk. Most Honky-Tonk songs deal about relationship problems, alcohol abuse, financial worries or other misfortune. Instead of large barns, this music was played in the more intimate bars of the southern US, which were called "honky-tonks". However, honky-tonks were still large enough to force the artist to implement electric instrumentation to top the crowd volume-wise. Honky-Tonk also introduced a steady 4/4 beat to Country music, which diverted the genre from Folk. Honky-Tonk artists often sang with a thick, southern tongue and in a nasal tone. Combined with the cowboy hat, boots and costume, the caricature of the traditional Country singer was complete. Honky-Tonk remains an important separate stream in Country's history, and is sometimes synonymous with so-called "Hardcore Country".</p>

            <div class="row">
                <div class="col-1"><div class="buttons buttons-country">1</div></div>
                <div class="col-1"><div class="buttons buttons-country">2</div></div>
                <div class="col-1"><div class="buttons buttons-country">3</div></div>
                <div class="col-1"><div class="buttons buttons-country">4</div></div>
                <div class="col-1"><div class="buttons buttons-country">5</div></div>
                <div class="col-1"><div class="buttons buttons-country">6</div></div>
                <div class="col-1"><div class="buttons buttons-country">7</div></div>
                <div class="col-1"><div class="buttons buttons-country">8</div></div>
                <div class="col-1"><div class="buttons buttons-country">9</div></div>
            </div>

            <p class="artisttrack">Artist: <span id="artist"><span></p><br>
            <p class="artisttrack">Track: <span id="track"></span></p>
            <div class="col-1 stop"><div class="buttons buttons-country-stop">&FilledSmallSquare;</div></div>
        </div>

        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>

        <script>
            $(document).ready(function() {
                var tracks = [
                    {
                        artist: "Hank Williams",
                        track: "Hey Good Looking",
                        path: "../../samples/country/honkytonk1.ogg"
                    },
                    {
                        artist: "Johnny Cash",
                        track: "I Walk The Line",
                        path: "../../samples/country/honkytonk2.ogg"
                    },
                    {
                        artist: "Al Dexter",
                        track: "Honky Tonk Blues",
                        path: "../../samples/country/honkytonk3.ogg"
                    },
                    {
                        artist: "Lefty Frizzell",
                        track: "You Win Again",
                        path: "../../samples/country/honkytonk4.ogg"
                    },
                    {
                        artist: "Ernest Tubb",
                        track: "Walking The Floor Over You",
                        path: "../../samples/country/honkytonk5.ogg"
                    },
                    {
                        artist: "George Jones",
                        track: "Still Doin' Time",
                        path: "../../samples/country/honkytonk6.ogg"
                    },
                    {
                        artist: "Merle Travis",
                        track: "Nine Pound Hammer",
                        path: "../../samples/country/honkytonk7.ogg"
                    },
                    {
                        artist: "Rex Griffin",
                        track: "Lovesick Blues",
                        path: "../../samples/country/honkytonk8.ogg"
                    },
                    {
                        artist: "Kitty Wells",
                        track: "It Wasn't God Who Made Honky Tonk Angels",
                        path: "../../samples/country/honkytonk9.ogg"
                    }
                ]

                tracks.forEach(track => {
                    const audio = new Audio()
                    audio.addEventListener('canplaythrough', null, false)
                    audio.src = track.path
                })

                var artistSpan = $(document).find('#artist')[0]
                var track = $(document).find('#track')[0]
                var audioInstanceArray = [];
                var buttons = [];
                var audioInstance;

                $(document).find('.buttons-country').each(function(index, button) {
                    buttons.push(button);
                    $(this).click(function() {
                        removeAllButtonBorders()
                        $(this).toggleClass('clicked');
                        stopAllMusic()
                        audioInstance = new Audio(tracks[index].path);
                        audioInstanceArray.push(audioInstance);
                        audioInstance.play();
                        artistSpan.innerHTML = tracks[index].artist
                        track.innerHTML = tracks[index].track
                    });
                });

                $('.buttons-country-stop').on('click', function() {
                    stopAllMusic()
                    artistSpan.innerHTML = ''
                    track.innerHTML = ''
                    removeAllButtonBorders()
                });

                var removeAllButtonBorders = () => {
                    buttons.forEach(
                        button => button.className = "buttons buttons-country"
                    )
                }

                var stopAllMusic = () => {
                    audioInstanceArray.forEach(function(audioInstance, index) {
                        audioInstance.pause();
                        audioInstance.currentTime = 0;
                        audioInstanceArray.pop();
                    });
                }
            });
        </script>
    </body>
</html>
