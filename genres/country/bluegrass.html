<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,900">
        <link rel="stylesheet" href="../../css/style.css">
        <title>Bluegrass</title>
    </head>

    <body class="genre" id="bluegrass">
        <div class="box country">
            <h1>BLUEGRASS</h1>

            <p>Bluegrass music grew out of traditional string band music that formed the roots of Country music. A lot of focus was put on the strings, which were fiercely fiddled, to create another type of Country, called Bluegrass. Bluegrass took its name from one of the first practicing bands &ndash; Bill Monroe and the Bluegrass Boys, who in their turn were named after the state Kentucky, often referred to as "the Bluegrass country". Bluegrass is that typical, atmospheric, hi-pitched, hyperactive Country most people know. Violins are very common, alongside mandolin, guitar and banjo. Although Bluegrass sounds like it's not taking itself seriously, it is actually very reactionary and serious music, rising up against authority. Bluegrass is more zealous than other Country genres, spreading forth revolution and highly religious messages, like a musical crusade. A bit like political Folk music one could say, but with a certain supercharged overdrive. Bluegrass swears off electric instruments and is always completely acoustic, like Folk. Improvisation or freewheeling is also a key Bluegrass element.</p>

            <div class="row icon-list">
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-country">1</div></div>
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-country">2</div></div>
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-country">3</div></div>
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-country">4</div></div>
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-country">5</div></div>
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-country">6</div></div>
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-country">7</div></div>
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-country">8</div></div>
                <div class="col-lg-1 col-xs-1"><div class="buttons buttons-country">9</div></div>
                <div class="d-block d-lg-none col-lg-1 col-xs-1"><div class="buttons buttons-country-stop">&FilledSmallSquare;</div></div>
            </div>

            <div class="example">
                <p class="artisttrack">Artist: <span id="artist"><span></p><br>
                <p class="artisttrack">Track: <span id="track"></span></p>
            </div>

            <div class="d-none d-lg-block col-md-1 stop"><div class="buttons buttons-country-stop">&FilledSmallSquare;</div></div>
        </div>

        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

        <script>
            $(document).ready(function() {
                var tracks = [
                    {
                        artist: "Bill Monroe & His Blue Grass Boys",
                        track: "Uncle Pen",
                        path: "../../samples/country/bluegrass1.ogg"
                    },
                    {
                        artist: "The Stanley Brothers",
                        track: "I'm A Man Of Constant Sorrow",
                        path: "../../samples/country/bluegrass2.ogg"
                    },
                    {
                        artist: "The Kingston Trio",
                        track: "M.T.A.",
                        path: "../../samples/country/bluegrass3.ogg"
                    },
                    {
                        artist: "Alison Krauss & Union Station",
                        track: "Two Highways",
                        path: "../../samples/country/bluegrass4.ogg"
                    },
                    {
                        artist: "Flatt & Scruggs",
                        track: "Foggy Mountain Breakdown",
                        path: "../../samples/country/bluegrass5.ogg"
                    },
                    {
                        artist: "The Osborne Brothers",
                        track: "Rocky Top",
                        path: "../../samples/country/bluegrass6.ogg"
                    },
                    {
                        artist: "Dailey & Vincent",
                        track: "Head Hung Down",
                        path: "../../samples/country/bluegrass7.ogg"
                    },
                    {
                        artist: "Ralph Stanley",
                        track: "Clinch Mountain Backstep",
                        path: "../../samples/country/bluegrass8.ogg"
                    },
                    {
                        artist: "The Johnson Mountain Boys",
                        track: "Last Goodbye",
                        path: "../../samples/country/bluegrass9.ogg"
                    }
                ]

                tracks.forEach(track => {
                    const audio = new Audio()
                    audio.addEventListener('canplaythrough', null, false)
                    audio.src = track.path
                })

                var artistSpan = $(document).find('#artist')[0]
                var track = $(document).find('#track')[0]
                var audioInstanceArray = [];
                var buttons = [];
                var audioInstance;

                $(document).find('.buttons-country').each(function(index, button) {
                    buttons.push(button);
                    $(this).click(function() {
                        removeAllButtonBorders()
                        $(this).toggleClass('clicked');
                        stopAllMusic()
                        audioInstance = new Audio(tracks[index].path);
                        audioInstanceArray.push(audioInstance);
                        audioInstance.play();
                        artistSpan.innerHTML = tracks[index].artist
                        track.innerHTML = tracks[index].track
                    });
                });

                $('.buttons-country-stop').on('click', function() {
                    stopAllMusic()
                    artistSpan.innerHTML = ''
                    track.innerHTML = ''
                    removeAllButtonBorders()
                });

                var removeAllButtonBorders = () => {
                    buttons.forEach(
                        button => button.className = "buttons buttons-country"
                    )
                }

                var stopAllMusic = () => {
                    audioInstanceArray.forEach(function(audioInstance, index) {
                        audioInstance.pause();
                        audioInstance.currentTime = 0;
                        audioInstanceArray.pop();
                    });
                }
            });
        </script>
    </body>
</html>
